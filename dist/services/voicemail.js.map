{"version":3,"file":"voicemail.js","sources":["../../src/services/voicemail.ts"],"sourcesContent":["// Copyright (C) 2024 Nethesis S.r.l.\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\nimport { store } from '../store'\n\n/**\n * Returns the file name of the voicemail\n * @param id Voicemail ID\n * @returns Promise resolving to filename\n */\nexport async function getVoicemailFileName(id: string): Promise<string> {\n  if (!id) {\n    throw new Error('Voicemail ID is required')\n  }\n\n  const { baseURL, headers } = store.getState().fetchDefaults\n\n  try {\n    const response = await fetch(`${baseURL}/voicemail/download/${id}`, {\n      headers: { ...headers },\n    })\n\n    if (!response.ok) {\n      throw new Error(`Failed to get voicemail filename: ${response.status} ${response.statusText}`)\n    }\n\n    return await response.json()\n  } catch (error) {\n    console.error('Error fetching voicemail filename:', error)\n    throw error\n  }\n}\n\n/**\n * Returns the base64 audio content of the voicemail\n * @param id Voicemail ID\n * @returns Promise resolving to base64 audio data\n */\nexport async function getVoicemailBase64(id: string): Promise<string> {\n  if (!id) {\n    throw new Error('Voicemail ID is required')\n  }\n\n  const { baseURL, headers } = store.getState().fetchDefaults\n\n  try {\n    const response = await fetch(`${baseURL}/voicemail/listen/${id}`, {\n      headers: { ...headers },\n    })\n\n    if (!response.ok) {\n      throw new Error(`Failed to get voicemail audio: ${response.status} ${response.statusText}`)\n    }\n\n    return await response.json()\n  } catch (error) {\n    console.error('Error fetching voicemail audio:', error)\n    throw error\n  }\n}\n"],"names":["id","Error","_a","store","getState","fetchDefaults","baseURL","headers","fetch","concat","__assign","response","_b","sent","ok","status","statusText","json","console","error","error_2","error_1"],"mappings":"kLAsCM,SAAmCA,iIACvC,IAAKA,EACH,MAAM,IAAIC,MAAM,4BAGZC,EAAuBC,EAAKA,MAACC,WAAWC,cAAtCC,EAAOJ,EAAAI,QAAEC,EAAOL,EAAAK,yBAGL,6BAAA,CAAA,EAAMC,MAAM,GAAAC,OAAGH,EAA4B,sBAAAG,OAAAT,GAAM,CAChEO,QAAOG,EAAAA,SAAA,CAAA,EAAOH,aAGhB,KAJMI,EAAWC,EAEfC,QAEYC,GACZ,MAAM,IAAIb,MAAM,kCAAAQ,OAAkCE,EAASI,OAAM,KAAAN,OAAIE,EAASK,aAGzE,MAAA,CAAA,EAAML,EAASM,QAAtB,KAAA,EAAA,MAAA,CAAA,EAAOL,iBAGP,iBADAM,QAAQC,MAAM,kCAAmCC,GAC3CA,yBAET,+BAjDK,SAAqCpB,iIACzC,IAAKA,EACH,MAAM,IAAIC,MAAM,4BAGZC,EAAuBC,EAAKA,MAACC,WAAWC,cAAtCC,EAAOJ,EAAAI,QAAEC,EAAOL,EAAAK,yBAGL,6BAAA,CAAA,EAAMC,MAAM,GAAAC,OAAGH,EAA8B,wBAAAG,OAAAT,GAAM,CAClEO,QAAOG,EAAAA,SAAA,CAAA,EAAOH,aAGhB,KAJMI,EAAWC,EAEfC,QAEYC,GACZ,MAAM,IAAIb,MAAM,qCAAAQ,OAAqCE,EAASI,OAAM,KAAAN,OAAIE,EAASK,aAG5E,MAAA,CAAA,EAAML,EAASM,QAAtB,KAAA,EAAA,MAAA,CAAA,EAAOL,iBAGP,iBADAM,QAAQC,MAAM,qCAAsCE,GAC9CA,yBAET"}