"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../node_modules/tslib/tslib.es6.js"),t=require("../store/index.js");var n=function(e){return e.rows=e.rows.map((function(e){return o(e)})),e.totalPages=Math.ceil(e.count/50),e};function o(e){return e.name?(e.kind="person",e.displayName=e.name):(e.kind="company",e.displayName=e.company),e.contacts&&(e.contacts=JSON.parse(e.contacts)),e}exports.PAGE_SIZE=50,exports.getMainPhoneNumber=function(e){return e.extension?e.extension:e.workphone?e.workphone:e.cellphone?e.cellphone:""},exports.getTotalPhoneNumbers=function(e){return[e.extension,e.workphone,e.cellphone].filter((function(e){return e})).length},exports.mapContact=o,exports.mapPhonebookResponse=n,exports.searchPhonebook=function(o,r,s,a){return void 0===a&&(a=50),e.__awaiter(this,void 0,void 0,(function(){var c,i,u,p,h,l,f;return e.__generator(this,(function(d){switch(d.label){case 0:return d.trys.push([0,3,,4]),c=t.store.getState().fetchDefaults,i=c.baseURL,u=c.headers,p="".concat(i,"/phonebook/search/").concat(r.trim()),p+="?offset=".concat((o-1)*a,"&limit=").concat(a,"&view=").concat(s),[4,fetch(p,{headers:e.__assign({},u)})];case 1:if(!(h=d.sent()).ok)throw new Error(h.statusText);return[4,h.json()];case 2:return l=d.sent(),[2,n(l)];case 3:throw f=d.sent(),new Error(f);case 4:return[2]}}))}))};
//# sourceMappingURL=phonebook.js.map
