"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../node_modules/tslib/tslib.es6.js"),r=require("../node_modules/@rematch/core/dist/core.esm.js"),a=require("../lib/phone/audio.js"),u=require("../events/PlayerEvents.js"),i={audioPlayer:null,audioPlayerPlaying:!1,audioPlayerPaused:!1,audioPlayerLoop:!1,audioPlayerTrackType:null,audioPlayerTrackName:null,audioPlayerTrackDuration:null,localAudio:null,remoteAudio:null,localVideo:null,largeRemoteVideo:null,smallRemoteVideo:null,localScreen:null,remoteScreen:null},n=r.createModel()({state:i,reducers:{updatePlayer:function(r,a){return e.__assign(e.__assign({},r),a)},updateAudioPlayerTrackDuration:function(r,a){return e.__assign(e.__assign({},r),{audioPlayerTrackDuration:a})},updateAudioPlayerSrc:function(e,r){return e.audioPlayer&&e.audioPlayer.current&&(e.audioPlayer.current.src=r),e},stopAudioPlayer:function(r){if(r.audioPlayer&&r.audioPlayer.current)return r.audioPlayer.current.pause(),r.audioPlayer.current.currentTime=0,e.__assign(e.__assign({},r),{audioPlayerPlaying:!1})},pauseAudioPlayer:function(r){if(r.audioPlayer&&r.audioPlayer.current)return r.audioPlayer.current.pause(),e.__assign(e.__assign({},r),{audioPlayerPaused:!0,audioPlayerPlaying:!1})},setAudioPlayerPaused:function(r,a){return e.__assign(e.__assign({},r),{audioPlayerPaused:a})},setAudioPlayerLoop:function(r,a){return e.__assign(e.__assign({},r),{audioPlayerLoop:a})},setAudioPlayerType:function(r,a){return e.__assign(e.__assign({},r),{audioPlayerTrackType:a})},setAudioPlayerPlaying:function(r,a){return e.__assign(e.__assign({},r),{audioPlayerPlaying:a})},resetAudioPlayerType:function(r){return e.__assign(e.__assign({},r),{audioPlayerTrackType:null})},setAudioPlayerTrackName:function(r,a){return e.__assign(e.__assign({},r),{audioPlayerTrackName:a})},playRemoteAudio:function(e){var r;e.remoteAudio&&(null===(r=e.remoteAudio.current)||void 0===r||r.play())},pauseRemoteAudio:function(e){var r;e.remoteAudio&&(null===(r=e.remoteAudio.current)||void 0===r||r.pause())},setAudioPlayerCurrentTime:function(e,r){e.audioPlayer&&e.audioPlayer.current&&(e.audioPlayer.current.currentTime=r)},reset:function(){return i}},effects:function(r){return{startAudioPlayer:function(e,a){if(a.player.audioPlayer&&a.player.audioPlayer.current){a.player.audioPlayerPlaying&&(a.player.audioPlayer.current.pause(),a.player.audioPlayer.current.currentTime=0);var i=function(){r.player.setAudioPlayerPlaying(!1),a.player.audioPlayer.current.removeEventListener("ended",i),e()};a.player.audioPlayer.current.addEventListener("ended",i),a.player.audioPlayer.current.play(),r.player.setAudioPlayerPlaying(!0),r.player.setAudioPlayerPaused(!1),"player"===a.island.view&&u.dispatchAudioPlayerStarted()}},updateStartAudioPlayer:function(u){var i=u.src,n=u.loop,o=void 0!==n&&n;return e.__awaiter(void 0,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return r.player.setAudioPlayerLoop(o),[4,a.updateAudioPlayerSource("data:audio/ogg;base64, ".concat(i))];case 1:return e.sent(),r.player.startAudioPlayer((function(){})),[2]}}))}))}}}});exports.player=n;
//# sourceMappingURL=player.js.map
