{"version":3,"file":"webrtc.js","sources":["../../src/models/webrtc.ts"],"sourcesContent":["// Copyright (C) 2024 Nethesis S.r.l.\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\nimport { createModel } from '@rematch/core'\nimport type { RootModel } from '.'\nimport { JanusTypes } from '../types'\n\nconst defaultState = {\n  INACTIVE_DEADLINE_TIME: 1000 * 60 * 45,\n  CHECK_INTERVAL_TIME: 1000 * 60 * 50,\n  janusInstance: null as any,\n  sipcall: null,\n  jsepGlobal: null,\n  remoteAudioStream: null,\n  localAudioStream: null,\n  localVideoStream: null as MediaStream | null,\n  remoteVideoStream: null as MediaStream | null,\n  lastActivity: null,\n  registered: false,\n  destroyed: false,\n}\n\nexport const webrtc = createModel<RootModel>()({\n  state: defaultState,\n  reducers: {\n    updateWebRTC: (state, payload: WebRTCTypes) => {\n      return {\n        ...state,\n        ...payload,\n      }\n    },\n    updateRemoteAudioStream: (state, payload: any) => {\n      return {\n        ...state,\n        remoteAudioStream: payload,\n      }\n    },\n    updateLocalAudioStream: (state, payload: any) => {\n      state.localAudioStream = payload\n      return state\n    },\n    updateLastActivity: (state, payload: any) => {\n      return {\n        ...state,\n        lastActivity: payload,\n      }\n    },\n    updateLocalVideoStream: (state, payload: MediaStream | null) => {\n      state.localVideoStream = payload\n      return state\n    },\n    updateRemoteVideoStream: (state, payload: MediaStream | null) => {\n      state.remoteVideoStream = payload\n      return state\n    },\n  },\n})\n\nexport interface WebRTCTypes {\n  INACTIVE_DEADLINE_TIME?: number\n  CHECK_INTERVAL_TIME?: number\n  janusInstance?: any\n  sipcall?: any\n  jsepGlobal?: any\n  remoteAudioStream?: any\n  localAudioStream?: null\n  lastActivity?: any\n  registered?: boolean\n  destroyed?: boolean\n}\n"],"names":["webrtc","createModel","state","INACTIVE_DEADLINE_TIME","CHECK_INTERVAL_TIME","janusInstance","sipcall","jsepGlobal","remoteAudioStream","localAudioStream","localVideoStream","remoteVideoStream","lastActivity","registered","destroyed","reducers","updateWebRTC","payload","__assign","updateRemoteAudioStream","updateLocalAudioStream","updateLastActivity","updateLocalVideoStream","updateRemoteVideoStream"],"mappings":"wHAsBaA,4DAAoBC,aAAXA,CAAyB,CAC7CC,MAhBmB,CACnBC,uBAAwB,KACxBC,oBAAqB,IACrBC,cAAe,KACfC,QAAS,KACTC,WAAY,KACZC,kBAAmB,KACnBC,iBAAkB,KAClBC,iBAAkB,KAClBC,kBAAmB,KACnBC,aAAc,KACdC,YAAY,EACZC,WAAW,GAKXC,SAAU,CACRC,aAAc,SAACd,EAAOe,GACpB,OACKC,EAAAA,SAAAA,EAAAA,SAAA,CAAA,EAAAhB,GACAe,EAEN,EACDE,wBAAyB,SAACjB,EAAOe,GAC/B,OAAAC,EAAAA,SAAAA,EAAAA,SAAA,GACKhB,GAAK,CACRM,kBAAmBS,GAEtB,EACDG,uBAAwB,SAAClB,EAAOe,GAE9B,OADAf,EAAMO,iBAAmBQ,EAClBf,CACR,EACDmB,mBAAoB,SAACnB,EAAOe,GAC1B,OAAAC,EAAAA,SAAAA,EAAAA,SAAA,GACKhB,GAAK,CACRU,aAAcK,GAEjB,EACDK,uBAAwB,SAACpB,EAAOe,GAE9B,OADAf,EAAMQ,iBAAmBO,EAClBf,CACR,EACDqB,wBAAyB,SAACrB,EAAOe,GAE/B,OADAf,EAAMS,kBAAoBM,EACnBf,CACR"}