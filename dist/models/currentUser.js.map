{"version":3,"file":"currentUser.js","sources":["../../src/models/currentUser.ts"],"sourcesContent":["// Copyright (C) 2024 Nethesis S.r.l.\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\nimport { createModel } from '@rematch/core'\nimport type { RootModel } from '.'\nimport type { UserInfoTypes, ExtensionTypes, ConversationsTypes } from '../types'\n\nconst defaultState: CurrentUserTypes = {\n  currentUserReady: false,\n  conversations: {},\n}\n\nexport const currentUser = createModel<RootModel>()({\n  state: defaultState,\n  reducers: {\n    updateCurrentUser: (state, payload: UserInfoTypes) => {\n      return {\n        ...state,\n        ...payload,\n      }\n    },\n    updateMainPresence: (state, payload) => {\n      state.mainPresence = payload\n    },\n    updateCurrentDefaultDevice: (state, payload) => {\n      state.default_device = payload\n    },\n    setCurrentUserReady: (state, payload: boolean) => {\n      return {\n        ...state,\n        currentUserReady: payload,\n      }\n    },\n    updateConversations: (state, payload: ExtensionTypes) => {\n      // Update the conversatins of the exten\n      state.conversations[payload.exten] = payload.conversations\n      return state\n    },\n  },\n})\n\ninterface CurrentUserTypes extends UserInfoTypes {\n  currentUserReady: boolean\n  conversations: UserConversationTypes\n}\n\ninterface UserConversationTypes {\n  [exten: string]: ConversationsTypes\n}\n"],"names":["currentUser","createModel","state","currentUserReady","conversations","reducers","updateCurrentUser","payload","__assign","updateMainPresence","mainPresence","updateCurrentDefaultDevice","default_device","setCurrentUserReady","updateConversations","exten"],"mappings":"wHAYaA,4DAAyBC,aAAXA,CAAyB,CAClDC,MANqC,CACrCC,kBAAkB,EAClBC,cAAe,CAAE,GAKjBC,SAAU,CACRC,kBAAmB,SAACJ,EAAOK,GACzB,OACKC,EAAAA,SAAAA,EAAAA,SAAA,CAAA,EAAAN,GACAK,EAEN,EACDE,mBAAoB,SAACP,EAAOK,GAC1BL,EAAMQ,aAAeH,CACtB,EACDI,2BAA4B,SAACT,EAAOK,GAClCL,EAAMU,eAAiBL,CACxB,EACDM,oBAAqB,SAACX,EAAOK,GAC3B,OAAAC,EAAAA,SAAAA,EAAAA,SAAA,GACKN,GAAK,CACRC,iBAAkBI,GAErB,EACDO,oBAAqB,SAACZ,EAAOK,GAG3B,OADAL,EAAME,cAAcG,EAAQQ,OAASR,EAAQH,cACtCF,CACR"}