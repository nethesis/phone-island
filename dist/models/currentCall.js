"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../node_modules/tslib/tslib.es6.js"),n=require("../node_modules/@rematch/core/dist/core.esm.js"),r=require("../static/incoming_ringtone.js"),t=require("../events/CallEvents.js");require("react");var i=require("../utils/genericFunctions/eventDispatch.js");require("../store/index.js"),require("../node_modules/react-redux/es/index.js");var a={displayName:"",username:"",number:"",incomingSocket:!1,incomingWebRTC:!1,incoming:!1,acceptedSocket:!1,acceptedWebRTC:!1,accepted:!1,outgoingSocket:!1,outgoingWebRTC:!1,parked:!1,outgoing:!1,startTime:"",muted:!1,paused:!1,keypadValue:"",conversationId:"",transferring:!1,conferencing:!1,transferringName:"",transferringNumber:"",transferringStartTime:"",transferSwitching:!1,transferCalls:new Array,ownerExtension:"",isRecording:!1,isLocalVideoEnabled:!1,showRemoteVideoPlaceHolder:!0,hasVideoTrackAdded:!1,isStartingVideoCall:!1,streamingSourceNumber:"",chDest:new Array,chSource:new Array},s=n.createModel()({state:a,reducers:{updateCurrentCall:function(n,r){return Number(r.startTime)&&n.startTime&&delete r.startTime,e.__assign(e.__assign(e.__assign({},n),r),{transferCalls:n.transferCalls})},updateKeypadValue:function(n,r){return e.__assign(e.__assign({},n),{keypadValue:r})},updateTransferring:function(n,r){return e.__assign(e.__assign({},n),{transferring:r})},updateTransferSwitching:function(n,r){return e.__assign(e.__assign({},n),{transferSwitching:r})},addTransferCalls:function(n,r){return n.transferCalls.find((function(e){return e.number===r.number}))?n:e.__assign(e.__assign({},n),{transferCalls:e.__spreadArray(e.__spreadArray([],n.transferCalls,!0),[r],!1)})},deleteTransferCalls:function(n){return e.__assign(e.__assign({},n),{transferCalls:n.transferCalls.filter((function(e){return"transferred"!==e.type}))})},setParked:function(e,n){return e.parked=n,e},updateRecordingStatus:function(e,n){return e.isRecording=n,e},updateStartTime:function(e,n){return e.startTime=n,e},updateIncoming:function(e,n){return e.incoming=n,e},reset:function(){return a},setLocalVideoEnabled:function(e,n){return e.isLocalVideoEnabled=n,e},setVideoTrackAdded:function(e,n){return e.hasVideoTrackAdded=n,e},updateConferencing:function(n,r){return e.__assign(e.__assign({},n),{conferencing:r})}},effects:function(n){return{checkIncomingUpdatePlay:function(t,i){var a,s,u,d,o,c;("webrtc"===(null===(s=null===(a=null==i?void 0:i.currentUser)||void 0===a?void 0:a.default_device)||void 0===s?void 0:s.type)&&(null==t?void 0:t.incomingWebRTC)||"physical"===(null===(d=null===(u=null==i?void 0:i.currentUser)||void 0===u?void 0:u.default_device)||void 0===d?void 0:d.type)&&(null==t?void 0:t.incomingSocket)||"nethlink"===(null===(c=null===(o=null==i?void 0:i.currentUser)||void 0===o?void 0:o.default_device)||void 0===c?void 0:c.type)&&(null==t?void 0:t.incomingWebRTC))&&(t.incoming=!0,n.player.updateStartAudioPlayer({src:r.default,loop:!0})),n.currentCall.updateCurrentCall(e.__assign({},t))},checkOutgoingUpdate:function(r,i){var a,s,u;("webrtc"===(null===(a=i.currentUser.default_device)||void 0===a?void 0:a.type)&&r.outgoingWebRTC||"physical"===(null===(s=i.currentUser.default_device)||void 0===s?void 0:s.type)&&r.outgoingSocket||"nethlink"===(null===(u=i.currentUser.default_device)||void 0===u?void 0:u.type)&&r.outgoingWebRTC)&&(r.outgoing=!0,t.dispatchOutgoingCallStarted(r.displayName,r.number)),n.currentCall.updateCurrentCall(e.__assign({},r))},checkAcceptedUpdate:function(r,t){var a,s,u;("webrtc"===(null===(a=t.currentUser.default_device)||void 0===a?void 0:a.type)&&r.acceptedWebRTC||"physical"===(null===(s=t.currentUser.default_device)||void 0===s?void 0:s.type)&&r.acceptedSocket||"nethlink"===(null===(u=t.currentUser.default_device)||void 0===u?void 0:u.type)&&r.acceptedWebRTC)&&(r.accepted=!0,i.eventDispatch("phone-island-call-answered",{})),n.currentCall.updateCurrentCall(e.__assign({},r))}}}});exports.currentCall=s;
//# sourceMappingURL=currentCall.js.map
