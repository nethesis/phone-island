{"version":3,"file":"darkTheme.js","sources":["../../src/lib/darkTheme.ts"],"sourcesContent":["// Copyright (C) 2024 Nethesis S.r.l.\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\nimport { setJSONItem, getJSONItem, eventDispatch } from '../utils'\nimport { store } from '../store'\n\nconst addDarkClassToDocument = () => {\n  document.documentElement.classList.add('pi-dark')\n}\n\nconst removeDarkClassFromDocument = () => {\n  document.documentElement.classList.remove('pi-dark')\n}\n\n/**\n * Read theme from local storage and update global store\n */\nexport const checkDarkTheme = () => {\n  const preferences = getJSONItem(`phone-island-theme-selected`) || {}\n  let theme = 'system'\n\n  if (preferences.themeSelected === 'dark') {\n    theme = 'dark'\n    addDarkClassToDocument()\n  } else if (preferences.themeSelected === 'light') {\n    theme = 'light'\n    removeDarkClassFromDocument()\n  } else {\n    // system theme\n    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {\n      addDarkClassToDocument()\n    } else {\n      removeDarkClassFromDocument()\n    }\n  }\n\n  // update global store\n  store.dispatch.darkTheme.update(theme)\n}\n\nexport const setTheme = (theme: string) => {\n  setJSONItem('phone-island-theme-selected', { themeSelected: theme })\n  checkDarkTheme()\n  eventDispatch('phone-island-theme-changed', {})\n}\n"],"names":["addDarkClassToDocument","document","documentElement","classList","add","removeDarkClassFromDocument","remove","checkDarkTheme","preferences","getJSONItem","theme","themeSelected","window","matchMedia","matches","store","dispatch","darkTheme","update","setJSONItem","eventDispatch"],"mappings":"uOAMMA,EAAyB,WAC7BC,SAASC,gBAAgBC,UAAUC,IAAI,UACzC,EAEMC,EAA8B,WAClCJ,SAASC,gBAAgBC,UAAUG,OAAO,UAC5C,EAKaC,EAAiB,WAC5B,IAAMC,EAAcC,EAAAA,YAAY,gCAAkC,CAAA,EAC9DC,EAAQ,SAEsB,SAA9BF,EAAYG,eACdD,EAAQ,OACRV,KACuC,UAA9BQ,EAAYG,eACrBD,EAAQ,QACRL,KAGIO,OAAOC,WAAW,gCAAgCC,QACpDd,IAEAK,IAKJU,EAAAA,MAAMC,SAASC,UAAUC,OAAOR,EAClC,4CAEwB,SAACA,GACvBS,EAAAA,YAAY,8BAA+B,CAAER,cAAeD,IAC5DH,IACAa,gBAAc,6BAA8B,CAAA,EAC9C"}