{"version":3,"file":"DisplayName.js","sources":["../../../src/components/CallView/DisplayName.tsx"],"sourcesContent":["// Copyright (C) 2024 Nethesis S.r.l.\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\nimport React, { useState, useRef, useLayoutEffect, useMemo, memo } from 'react'\nimport { StyledName } from '../../styles/Island.styles'\nimport { motion } from 'framer-motion'\nimport { RootState } from '../../store'\nimport { useSelector } from 'react-redux'\nimport { useTranslation } from 'react-i18next'\nimport {\n  getDisplayText,\n  getTextClassName,\n  MemoizedTextScroll,\n  DisplayTextResult,\n} from './DisplayNameUtils'\n\nconst selectDisplayNameAndIncoming = (state: RootState) => ({\n  displayName: state?.currentCall?.displayName,\n  incoming: state?.currentCall?.incoming,\n})\n\nconst selectIntrudeListenStatus = (state: RootState) => state.listen\n\nconst DisplayName: React.FC<DisplayNameProps> = () => {\n  const [animateText, setAnimateText] = useState<boolean>(false)\n  const nameContainer = useRef<null | HTMLDivElement>(null)\n  const nameText = useRef<null | HTMLDivElement>(null)\n  const NameMotion = motion(StyledName)\n\n  const { displayName, incoming } = useSelector(selectDisplayNameAndIncoming)\n  const intrudeListenStatus = useSelector(selectIntrudeListenStatus)\n\n  const { t } = useTranslation()\n\n  useLayoutEffect(() => {\n    if (\n      nameContainer?.current &&\n      nameText?.current &&\n      nameText?.current?.clientWidth - nameContainer?.current?.clientWidth > 5\n    ) {\n      setAnimateText(true)\n    }\n  }, [nameContainer, nameText])\n\n  const textClassName = useMemo(\n    () => getTextClassName({ intrudeListenStatus, animateText }),\n    [intrudeListenStatus, animateText],\n  )\n\n  const displayTextResult = useMemo(\n    () => getDisplayText({ intrudeListenStatus, displayName, incoming, t }),\n    [intrudeListenStatus, displayName, incoming, t],\n  )\n\n  const renderDisplayContent = () => {\n    if (displayTextResult.type === 'scroll') {\n      return <MemoizedTextScroll text={displayTextResult.content} />\n    }\n    return displayTextResult.content\n  }\n\n  return (\n    <NameMotion ref={nameContainer} className='pi-whitespace-nowrap pi-relative pi-overflow-hidden'>\n      <div className={textClassName} ref={nameText}>\n        {renderDisplayContent()}\n      </div>\n      <div className='pi-w-6 pi-absolute pi-right-0 pi-top-0 pi-h-full pi-bg-gradient-to-r pi-from-transparent dark:pi-to-gray-950 pi-to-gray-50' />\n    </NameMotion>\n  )\n}\n\nexport default memo(DisplayName)\n\nexport interface DisplayNameProps {}\n"],"names":["selectDisplayNameAndIncoming","state","displayName","_a","currentCall","incoming","_b","selectIntrudeListenStatus","listen","memo","useState","animateText","setAnimateText","nameContainer","useRef","nameText","NameMotion","motion","StyledName","useSelector","intrudeListenStatus","t","useTranslation","useLayoutEffect","current","clientWidth","textClassName","useMemo","getTextClassName","displayTextResult","getDisplayText","React","createElement","ref","className","type","MemoizedTextScroll","text","content"],"mappings":"68BAgBMA,EAA+B,SAACC,WAAqB,MAAC,CAC1DC,YAA+B,QAAlBC,EAAAF,eAAAA,EAAOG,mBAAW,IAAAD,OAAA,EAAAA,EAAED,YACjCG,SAA4B,QAAlBC,EAAAL,eAAAA,EAAOG,mBAAW,IAAAE,OAAA,EAAAA,EAAED,WAG1BE,EAA4B,SAACN,GAAqB,OAAAA,EAAMO,MAAN,EAkDzCC,EAAAA,EAAAA,MAhDiC,WACxC,IAAAN,EAAgCO,EAAAA,UAAkB,GAAjDC,EAAWR,EAAA,GAAES,EAAcT,EAAA,GAC5BU,EAAgBC,SAA8B,MAC9CC,EAAWD,SAA8B,MACzCE,EAAaC,SAAOC,EAAAA,YAEpBZ,EAA4Ba,cAAYnB,GAAtCE,EAAWI,EAAAJ,YAAEG,EAAQC,EAAAD,SACvBe,EAAsBD,cAAYZ,GAEhCc,EAAMC,qBAEdC,EAAAA,iBAAgB,oBAEZV,aAAA,EAAAA,EAAeW,WACfT,aAAQ,EAARA,EAAUS,WACS,QAAnBrB,EAAAY,aAAQ,EAARA,EAAUS,eAAS,IAAArB,OAAA,EAAAA,EAAAsB,sBAAcnB,EAAAO,aAAA,EAAAA,EAAeW,8BAASC,aAAc,GAEvEb,GAAe,EAEnB,GAAG,CAACC,EAAeE,IAEnB,IAAMW,EAAgBC,EAAAA,SACpB,WAAM,OAAAC,EAAgBA,iBAAC,CAAER,oBAAmBA,EAAET,YAAWA,GAAG,GAC5D,CAACS,EAAqBT,IAGlBkB,EAAoBF,WACxB,WAAM,OAAAG,EAAAA,eAAe,CAAEV,oBAAmBA,EAAElB,YAAWA,EAAEG,SAAQA,EAAEgB,KAAI,GACvE,CAACD,EAAqBlB,EAAaG,EAAUgB,IAU/C,OACEU,EAAAA,QAACC,cAAAhB,EAAW,CAAAiB,IAAKpB,EAAeqB,UAAU,uDACxCH,UAAKC,cAAA,MAAA,CAAAE,UAAWR,EAAeO,IAAKlB,GARP,WAA3Bc,EAAkBM,KACbJ,EAAAA,QAAAC,cAACI,EAAkBA,mBAAC,CAAAC,KAAMR,EAAkBS,UAE9CT,EAAkBS,SAQvBP,EAAA,QAAAC,cAAA,MAAA,CAAKE,UAAU,+HAGrB"}