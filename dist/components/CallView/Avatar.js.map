{"version":3,"file":"Avatar.js","sources":["../../../src/components/CallView/Avatar.tsx"],"sourcesContent":["// Copyright (C) 2025 Nethesis S.r.l.\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\nimport React, { type FC, useMemo } from 'react'\nimport { motion } from 'framer-motion'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../store'\n\nconst iconVariants = {\n  open: {\n    width: '56px',\n    height: '56px',\n    borderRadius: '26px',\n  },\n  closed: {\n    width: '24px',\n    height: '24px',\n    borderRadius: '26px',\n  },\n}\n\nconst Avatar: FC = () => {\n  const { isOpen } = useSelector((state: RootState) => state.island)\n  const { avatars } = useSelector((state: RootState) => state.avatars)\n  const user = useSelector((state: RootState) => state.users)\n  const {\n    username,\n    number,\n    incoming,\n    outgoing,\n    accepted,\n    transferring,\n  } = useSelector((state: RootState) => state.currentCall)\n\n  const avatarUrl = useMemo(() => {\n    if (transferring) {\n      return user?.extensions && user.extensions[number]?.username\n        ? avatars?.[user.extensions[number].username]\n        : undefined\n    }\n    return avatars?.[username]\n  }, [avatars, username, transferring, user, number])\n\n  const showPulseEffect = incoming || (outgoing && !accepted)\n\n  return (\n    <motion.div\n      className={`pi-relative ${isOpen ? 'pi--mt-1' : ''}`}\n      animate={isOpen ? 'open' : 'closed'}\n      variants={iconVariants}\n    >\n      {showPulseEffect && (\n        <motion.div\n          style={{ animationDuration: '2s' }}\n          animate={isOpen ? 'open' : 'closed'}\n          variants={iconVariants}\n          className='pi-rounded-xl pi-bg-gray-600 pi-absolute pi-opacity-60 pi-top-0 pi-left-0 pi-animate-ping pi-h-12 pi-w-12'\n        />\n      )}\n      <motion.div\n        className='pi-relative pi-z-30 pi-h-12 pi-w-12 pi-bg-secondaryNeutral dark:pi-bg-secondaryNeutralDark pi-rounded-sm pi-bg-cover'\n        style={{\n          backgroundImage: avatarUrl ? `url(${avatarUrl})` : 'none',\n          backgroundRepeat: 'no-repeat',\n          backgroundSize: 'contain',\n        }}\n        animate={isOpen ? 'open' : 'closed'}\n        variants={iconVariants}\n      />\n    </motion.div>\n  )\n}\n\nexport default Avatar\n"],"names":["iconVariants","open","width","height","borderRadius","closed","isOpen","useSelector","state","island","avatars","user","users","_a","currentCall","username","number","incoming","outgoing","accepted","transferring","avatarUrl","useMemo","extensions","undefined","showPulseEffect","React","createElement","motion","div","className","concat","animate","variants","style","animationDuration","backgroundImage","backgroundRepeat","backgroundSize"],"mappings":"wYAQMA,EAAe,CACnBC,KAAM,CACJC,MAAO,OACPC,OAAQ,OACRC,aAAc,QAEhBC,OAAQ,CACNH,MAAO,OACPC,OAAQ,OACRC,aAAc,yBAIC,WACT,IAAAE,EAAWC,eAAY,SAACC,GAAqB,OAAAA,EAAMC,iBACnDC,EAAYH,eAAY,SAACC,GAAqB,OAAAA,EAAME,mBACtDC,EAAOJ,EAAWA,aAAC,SAACC,GAAqB,OAAAA,EAAMI,KAAN,IACzCC,EAOFN,EAAWA,aAAC,SAACC,GAAqB,OAAAA,EAAMM,WAAN,IANpCC,EAAQF,EAAAE,SACRC,EAAMH,EAAAG,OACNC,aACAC,EAAQL,EAAAK,SACRC,EAAQN,EAAAM,SACRC,iBAGIC,EAAYC,EAAAA,SAAQ,iBACxB,OAAIF,GACKT,aAAA,EAAAA,EAAMY,cAAqC,QAAvBV,EAAAF,EAAKY,WAAWP,UAAO,IAAAH,OAAA,EAAAA,EAAEE,UAChDL,eAAAA,EAAUC,EAAKY,WAAWP,GAAQD,eAClCS,EAECd,aAAO,EAAPA,EAAUK,EACnB,GAAG,CAACL,EAASK,EAAUK,EAAcT,EAAMK,IAErCS,EAAkBR,GAAaC,IAAaC,EAElD,OACEO,EAAAA,QAAAC,cAACC,EAAMA,OAACC,IACN,CAAAC,UAAW,eAAAC,OAAezB,EAAS,WAAa,IAChD0B,QAAS1B,EAAS,OAAS,SAC3B2B,SAAUjC,GAETyB,GACCC,EAAAA,QAACC,cAAAC,EAAMA,OAACC,IAAG,CACTK,MAAO,CAAEC,kBAAmB,MAC5BH,QAAS1B,EAAS,OAAS,SAC3B2B,SAAUjC,EACV8B,UAAU,8GAGdJ,EAAC,QAAAC,cAAAC,SAAOC,IAAG,CACTC,UAAU,uHACVI,MAAO,CACLE,gBAAiBf,EAAY,OAAOU,OAAAV,EAAY,KAAG,OACnDgB,iBAAkB,YAClBC,eAAgB,WAElBN,QAAS1B,EAAS,OAAS,SAC3B2B,SAAUjC,IAIlB"}