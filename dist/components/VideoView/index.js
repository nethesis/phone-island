"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../node_modules/tslib/tslib.es6.js"),t=require("react"),r=require("../Button.js");require("../../node_modules/react-redux/es/index.js");var a=require("../../store/index.js"),n=require("../../node_modules/@fortawesome/react-fontawesome/index.es.js"),i=require("../../node_modules/@fortawesome/free-solid-svg-icons/index.mjs.js"),o=require("../../node_modules/i18next/dist/esm/i18next.js"),l=require("../../utils/customHooks/useEventListener.js"),s=require("../../utils/customHooks/useIsomorphicLayoutEffect.js"),c=require("../../utils/genericFunctions/eventDispatch.js"),u=require("../Hangup.js"),d=require("../../lib/phone/call.js"),p=require("../../lib/webrtc/janus.js"),m=require("../CallView/Avatar.js"),f=require("../CallView/Timer.js"),v=require("../../lib/user/default_device.js"),g=require("../AudioBars.js"),h=require("../CustomThemedTooltip.js"),S=require("../../node_modules/@nethesis/nethesis-solid-svg-icons/index.mjs.js"),b=require("../../lib/devices/devices.js"),E=require("../../lib/avatars/avatars.js"),w=require("../../node_modules/react-redux/es/hooks/useDispatch.js"),y=require("../../node_modules/react-redux/es/hooks/useSelector.js");function T(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var C=T(t),k=function(){var T,k,x,j,N,q,V,I,R,D,L=w.useDispatch(),P=y.useSelector((function(e){return e.currentCall})),_=P.muted,A=P.startTime,M=P.isRecording,F=P.paused,U=P.isLocalVideoEnabled,B=P.showRemoteVideoPlaceHolder,J=P.hasVideoTrackAdded,z=P.displayName,W=P.isStartingVideoCall,G=y.useSelector((function(e){return e.screenShare})),O=G.localTracks,H=G.localVideos,K=G.role,Q=G.active,X=G.isStartingScreenShare,Y=G.isJoiningScreenShare,Z=G.isLeavingScreenShare,$=y.useSelector((function(e){return e.listen})),ee=y.useSelector((function(e){return e.island})).isOpen,te=y.useSelector((function(e){return e.webrtc})),re=te.janusInstance,ae=te.remoteAudioStream,ne=a.store.getState().currentUser,ie=t.useState(!1),oe=ie[0],le=ie[1],se=t.useState(!1),ce=se[0],ue=se[1],de=t.useRef(null),pe=t.useRef(null),me=t.useRef(null),fe=t.useRef(null),ve=t.useRef(null),ge=t.useRef(null),he=t.useRef(null),Se=t.useRef(null),be=t.useRef(p.default),Ee=a.store.select.mediaDevices.videoInputDevices(a.store.getState());s.useIsomorphicLayoutEffect((function(){L.player.updatePlayer({localScreen:fe,remoteScreen:ve,localVideo:ge,largeRemoteVideo:he,smallRemoteVideo:Se})}),[]),t.useEffect((function(){return Ne(),we(),addEventListener("fullscreenchange",ye),function(){removeEventListener("fullscreenchange",ye),de.current&&clearTimeout(de.current)}}),[]),t.useEffect((function(){W&&(ke(),L.currentCall.updateCurrentCall({isStartingVideoCall:!1}))}),[W]),t.useEffect((function(){X&&(Ve(),a.store.dispatch.screenShare.update({isStartingScreenShare:!1}))}),[X]),t.useEffect((function(){Y&&(Ie(),a.store.dispatch.screenShare.update({isJoiningScreenShare:!1}))}),[Y]),t.useEffect((function(){Z&&(De(),a.store.dispatch.screenShare.update({isLeavingScreenShare:!1}))}),[Z]),t.useEffect((function(){Ne(),we()}),[ee]);var we=function(){var e=a.store.getState().player.localVideo,t=a.store.getState().player.largeRemoteVideo,r=a.store.getState().player.smallRemoteVideo,n=a.store.getState().webrtc,i=n.localVideoStream,o=n.remoteVideoStream;(null==e?void 0:e.current)&&be.current.attachMediaStream&&be.current.attachMediaStream(e.current,i),(null==t?void 0:t.current)&&be.current.attachMediaStream&&be.current.attachMediaStream(t.current,o),(null==r?void 0:r.current)&&be.current.attachMediaStream&&be.current.attachMediaStream(r.current,o)},ye=function(){le(!!document.fullscreenElement)},Te=function(){document.fullscreenElement?(document.exitFullscreen(),c.eventDispatch("phone-island-fullscreen-exited",{})):me.current&&(me.current.requestFullscreen(),c.eventDispatch("phone-island-fullscreen-entered",{}))};l.useEventListener("phone-island-fullscreen-enter",(function(){Te()})),l.useEventListener("phone-island-fullscreen-exit",(function(){Te()}));var Ce=function(e,t){L.screenShare.update({source:e});var r=null;null==re||re.attach({plugin:"janus.plugin.videoroom",opaqueId:be.current.randomString(32),success:function(t){var n,i,o,l;r=t,L.screenShare.update({remoteFeed:t}),r.remoteTracks={},r.remoteVideos=0,null===(i=(n=be.current).log)||void 0===i||i.call(n,"Plugin attached! ("+r.getPlugin()+", id="+r.getId()+")"),null===(l=(o=be.current).log)||void 0===l||l.call(o,"  -- This is a subscriber");var s={request:"join",room:a.store.getState().screenShare.room,ptype:"subscriber",feed:e};r.send({message:s})},error:function(e){var t,r;null===(r=(t=be.current).error)||void 0===r||r.call(t,"Error attaching videoroom plugin",e)},iceState:function(e){var t,a;null===(a=(t=be.current).log)||void 0===a||a.call(t,"ICE state (feed #"+r.rfindex+") changed to "+e)},webrtcState:function(e){var t,a;null===(a=(t=be.current).log)||void 0===a||a.call(t,"Janus says this WebRTC PeerConnection (feed #"+r.rfindex+") is "+(e?"up":"down")+" now")},slowLink:function(e,t,r){var a,n;null===(n=(a=be.current).warn)||void 0===n||n.call(a,"Janus reports problems "+(e?"sending":"receiving")+" packets on mid "+r+" ("+t+" lost packets)")},onmessage:function(n,i){var o,l,s,c,u,d,p,m,f,v;null===(l=(o=be.current).debug)||void 0===l||l.call(o," ::: Got a message (listener) :::",n);var g=n.videoroom;null===(c=(s=be.current).debug)||void 0===c||c.call(s,"Event: "+g),g&&("attached"===g?null===(d=(u=be.current).log)||void 0===d||d.call(u,"Successfully attached to feed "+e+" ("+t+") in room "+n.room):null===(m=(p=be.current).warn)||void 0===m||m.call(p,"Unhandled event: "+g)),i&&(null===(v=(f=be.current).debug)||void 0===v||v.call(f,"Handling SDP as well...",i),r.createAnswer({jsep:i,tracks:[{type:"data"}],success:function(e){var t,n;null===(n=(t=be.current).debug)||void 0===n||n.call(t,"Got SDP!",e);var i={request:"start",room:a.store.getState().screenShare.room};r.send({message:i,jsep:e})},error:function(e){var t,r;null===(r=(t=be.current).error)||void 0===r||r.call(t,"WebRTC error:",e)}}))},onlocaltrack:function(e,t){},onremotetrack:function(e,t,n,i){var o,l,s,c,u,d,p,m;if(null===(l=(o=be.current).debug)||void 0===l||l.call(o,"Remote track (mid="+t+") "+(n?"added":"removed")+(i?" ("+i.reason+") ":"")+":",e),"video"!==e.kind||!i||"mute"!==i.reason&&"unmute"!==i.reason){if(!n){var f=a.store.getState().screenShare.remoteScreenStream;return be.current.stopAllTracks(f),void L.screenShare.update({active:!1})}if("video"===e.kind){var v=new MediaStream([e]);a.store.dispatch.screenShare.update({remoteScreenStream:v}),r.remoteTracks[t]=v,null===(d=(u=be.current).log)||void 0===d||d.call(u,"Created remote video stream: "+v);var g=a.store.getState().player.remoteScreen;(null==g?void 0:g.current)&&(null===(m=(p=be.current).attachMediaStream)||void 0===m||m.call(p,g.current,v))}}else null===(c=(s=be.current).log)||void 0===c||c.call(s,"Ignoring mute/unmute on screen-sharing track.")},oncleanup:function(){var t,a;null===(a=(t=be.current).log)||void 0===a||a.call(t," ::: Got a cleanup notification (remote feed "+e+") :::"),r.remoteTracks={},r.remoteVideos=0}})},ke=function(){var e=a.store.getState().webrtc.sipcall;a.store.dispatch.currentCall.updateCurrentCall({isLocalVideoEnabled:!0});var t=[],r=b.getCurrentVideoInputDeviceId(),n={type:"video",recv:!0};n.capture=!r||{deviceId:{exact:r}},a.store.getState().currentCall.hasVideoTrackAdded?(n.replace=!0,n.mid="1"):(n.add=!0,L.currentCall.setVideoTrackAdded(!0)),t.push(n),e.createOffer({tracks:t,success:function(t){e.send({message:{request:"update"},jsep:t}),c.eventDispatch("phone-island-video-enabled",{})},error:function(e){console.error("WebRTC error... "+JSON.stringify(e))}})};l.useEventListener("phone-island-video-enable",(function(){ke()}));var xe=function(){var e=a.store.getState().webrtc,t=e.sipcall,r=e.localVideoStream;be.current.stopAllTracks(r),a.store.dispatch.webrtc.updateLocalVideoStream(null),a.store.dispatch.currentCall.setLocalVideoEnabled(!1);var n=[];n.push({type:"video",mid:"1",remove:!0}),t.createOffer({tracks:n,success:function(e){t.send({message:{request:"update"},jsep:e}),c.eventDispatch("phone-island-video-disabled",{})},error:function(e){console.error("WebRTC error... "+JSON.stringify(e))}})};l.useEventListener("phone-island-video-disable",(function(){xe()}));var je=function(){null==re||re.attach({plugin:"janus.plugin.videoroom",opaqueId:be.current.randomString(32),success:function(e){L.screenShare.update({plugin:e});var t=a.store.getState().screenShare.role;"publisher"===t?(c.eventDispatch("phone-island-screen-share-initialized",{}),setTimeout((function(){!function(){var e,t;if(be.current.isExtensionEnabled()){var r={request:"create",description:be.current.randomString(32),bitrate:5e5,publishers:1},n=a.store.getState().screenShare.plugin;n.send({message:r,success:function(e){var t,r,i,o,l,s;if(e.error)null===(r=(t=be.current).error)||void 0===r||r.call(t,"Couldn't create room: "+e.error);else{var c=e.videoroom;if(null===(o=(i=be.current).debug)||void 0===o||o.call(i,"Event: "+c),c){var u=e.room;L.screenShare.update({room:u}),null===(s=(l=be.current).log)||void 0===s||s.call(l,"Screen sharing session created: "+u);var d={request:"join",room:u,ptype:"publisher",display:a.store.getState().currentUser.username};n.send({message:d})}}}})}else null===(t=(e=be.current).error)||void 0===t||t.call(e,"This browser doesn't support screensharing (getDisplayMedia unavailable)")}()}),500)):"listener"===t&&Re(),c.eventDispatch("phone-island-screen-share-started",{})},error:function(e){var t,r;null===(r=(t=be.current).error)||void 0===r||r.call(t,"Error attaching videoroom plugin",e)},consentDialog:function(e){},iceState:function(e){var t,r;null===(r=(t=be.current).log)||void 0===r||r.call(t,"ICE state changed to "+e)},mediaState:function(e,t){var r,a;null===(a=(r=be.current).log)||void 0===a||a.call(r,"Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){var t,r;null===(r=(t=be.current).log)||void 0===r||r.call(t,"Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},slowLink:function(e,t,r){var a,n;null===(n=(a=be.current).warn)||void 0===n||n.call(a,"Janus reports problems "+(e?"sending":"receiving")+" packets on mid "+r+" ("+t+" lost packets)")},onmessage:function(e,t){var r,n,i,o,l,s,c,u,d,p,m,f,v,g,h,S,b,E,w,y;null===(n=(r=be.current).debug)||void 0===n||n.call(r," ::: Got a message (publisher) :::",e);var T=a.store.getState().screenShare,C=T.plugin,k=T.role,x=e.videoroom;if(null===(o=(i=be.current).debug)||void 0===o||o.call(i,"Event: "+x),x)if("joined"===x){if("publisher"===k)null===(s=(l=be.current).debug)||void 0===s||s.call(l,"Negotiating WebRTC stream for our screen"),C.createOffer({tracks:[{type:"audio",capture:!0,recv:!1},{type:"screen",capture:!0,recv:!1}],success:function(e){var t,r;null===(r=(t=be.current).debug)||void 0===r||r.call(t,"Got publisher SDP!",e);C.send({message:{request:"configure",audio:!0,video:!0},jsep:e})},error:function(e){var t,r;null===(r=(t=be.current).error)||void 0===r||r.call(t,"WebRTC error:",e),L.screenShare.update({active:!1,role:""})}});else if(e.publishers){var j=e.publishers;for(var N in null===(u=(c=be.current).debug)||void 0===u||u.call(c,"Got a list of available publishers/feeds:",j),j)if(!j[N].dummy){var q=j[N].id,V=j[N].display;null===(p=(d=be.current).debug)||void 0===p||p.call(d,"  >> ["+q+"] "+V),Ce(q,V)}}}else if("event"===x)if("listener"===k&&e.publishers){j=e.publishers;for(var N in null===(f=(m=be.current).debug)||void 0===f||f.call(m,"Got a list of available publishers/feeds:",j),j)if(!j[N].dummy){q=j[N].id,V=j[N].display;null===(g=(v=be.current).debug)||void 0===g||g.call(v,"  >> ["+q+"] "+V),Ce(q,V)}}else if(e.leaving){var I=e.leaving;null===(S=(h=be.current).log)||void 0===S||S.call(h,"Publisher left: "+I)}else e.error&&(null===(E=(b=be.current).error)||void 0===E||E.call(b,"Error event: "+e.error));t&&(null===(y=(w=be.current).debug)||void 0===y||y.call(w,"Handling SDP as well...",t),C.handleRemoteJsep({jsep:t}))},onlocaltrack:function(e,t){var r,n,i,o,l,s;null===(n=(r=be.current).debug)||void 0===n||n.call(r,"Local track "+(t?"added":"removed")+":",e);var c=e.id.replace(/[{}]/g,"");if(t){if(!(null==O?void 0:O[c])){if("video"===e.kind){L.screenShare.update({localVideos:H+1});var u=new MediaStream([e]);a.store.dispatch.screenShare.update({localScreenStream:u}),null===(o=(i=be.current).log)||void 0===o||o.call(i,"Created local stream: "+u);var d=a.store.getState().player.localScreen;(null==d?void 0:d.current)&&(null===(s=(l=be.current).attachMediaStream)||void 0===s||s.call(l,d.current,u),qe(),e.addEventListener("ended",(function(){Pe()})))}var p=a.store.getState().screenShare.plugin;"completed"!==p.webrtcStuff.pc.iceConnectionState&&p.webrtcStuff.pc.iceConnectionState}}else{var m=null==O?void 0:O[c];if(m)try{var f=m.getTracks();for(var v in f){var g=f[v];g&&g.stop()}}catch(e){}"video"===e.kind&&L.screenShare.update({localVideos:H-1});var h=null==O?void 0:O.filter((function(e){return e!==O[c]}));L.screenShare.update({localTracks:h})}},onremotetrack:function(e,t,r){},oncleanup:function(){var e,t;null===(t=(e=be.current).log)||void 0===t||t.call(e," ::: Got a cleanup notification :::"),L.screenShare.update({localTracks:{},localVideos:0})}})},Ne=function(){var e=a.store.getState().player.localScreen,t=a.store.getState().player.remoteScreen,r=a.store.getState().screenShare,n=r.localScreenStream,i=r.remoteScreenStream;(null==e?void 0:e.current)&&be.current.attachMediaStream&&be.current.attachMediaStream(e.current,n),(null==t?void 0:t.current)&&be.current.attachMediaStream&&be.current.attachMediaStream(t.current,i)},qe=function(){var e=a.store.getState().websocket.socket,t=a.store.getState().currentCall.username,r=a.store.getState().screenShare.room,n=a.store.getState().currentUser.username;e.emit("message",{message:"screenSharingStart",roomId:r,destUser:t,callUser:n})},Ve=function(){L.screenShare.update({active:!0,role:"publisher"}),je()};l.useEventListener("phone-island-screen-share-start",(function(){Ve()}));var Ie=function(){L.screenShare.update({active:!0,role:"listener"}),je(),c.eventDispatch("phone-island-screen-share-joined",{})},Re=function(){var e={request:"join",room:a.store.getState().screenShare.room,ptype:"publisher",display:a.store.getState().currentUser.username};a.store.getState().screenShare.plugin.send({message:e})},De=function(){var e=a.store.getState().screenShare.remoteScreenStream;be.current.stopAllTracks(e),L.screenShare.update({active:!1}),c.eventDispatch("phone-island-screen-share-left",{})},Le=function(){ue(!0),de.current&&(clearTimeout(de.current),de.current=null),pe.current&&clearTimeout(pe.current),pe.current=setTimeout((function(){de.current=setTimeout((function(){ue(!1)}),3e3)}),100)},Pe=function(){var e=a.store.getState().screenShare,t=e.plugin,r=e.localScreenStream;be.current.stopAllTracks(r),L.screenShare.update({active:!1}),t.detach();var n=a.store.getState().websocket.socket,i=a.store.getState().currentCall.username,o=a.store.getState().screenShare.room,l=a.store.getState().currentUser.username;n.emit("message",{message:"screenSharingStop",roomId:o,destUser:i,callUser:l}),c.eventDispatch("phone-island-screen-share-stopped",{})};l.useEventListener("phone-island-screen-share-stop",(function(){Pe()}));var _e=t.useState(!0),Ae=_e[0],Me=_e[1],Fe=function(){return e.__awaiter(void 0,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return(null==Ee?void 0:Ee.length)>0?[4,b.checkWebCamPermission()]:[3,2];case 1:return e.sent()?(Me(!0),[2,!0]):(Me(!1),[2,!1]);case 2:return Me(!1),[2,!1];case 3:return[2]}}))}))};return C.default.createElement(C.default.Fragment,null,ee?C.default.createElement("div",{ref:me,onMouseMove:function(){return Le()},className:oe?"pi-h-screen":"pi-h-[480px] pi-w-[600px]"},C.default.createElement("div",{className:"pi-flex pi-relative pi-justify-center pi-w-full pi-h-full"},C.default.createElement("video",{autoPlay:!0,muted:!0,ref:ve,className:"pi-rounded-2xl pi-w-full pi-h-full ".concat(Q&&"listener"===K?"":"pi-hidden")}),C.default.createElement("video",{autoPlay:!0,muted:!0,ref:fe,className:"pi-rounded-2xl pi-w-full pi-h-full ".concat(Q&&"publisher"===K?"":"pi-hidden")}),C.default.createElement("video",{autoPlay:!0,muted:!0,ref:he,className:"pi-rounded-2xl ".concat(Q||B?"pi-hidden":"")}),C.default.createElement("div",{className:"pi-w-full pi-bg-gray-200 dark:pi-bg-gray-800 pi-flex pi-items-center pi-justify-center ".concat(Q||!B?"pi-hidden":"")},C.default.createElement("div",{className:"pi-rounded-full pi-bg-gray-700 dark:pi-bg-gray-200 pi-w-32 pi-h-32 pi-flex pi-items-center pi-justify-center"},C.default.createElement("span",{className:"pi-text-4xl pi-text-gray-50 dark:pi-text-gray-900"},E.getInitials(z)))),C.default.createElement("video",{muted:!0,autoPlay:!0,ref:ge,className:"pi-max-w-32 pi-max-h-32 pi-absolute pi-top-5 pi-right-5 pi-rounded-lg ".concat(U?"":"pi-hidden")}),C.default.createElement("div",{className:"pi-w-32 pi-h-24 pi-absolute pi-top-5 pi-right-5 pi-rounded-lg pi-bg-gray-200 dark:pi-bg-gray-900 pi-flex pi-items-center pi-justify-center ".concat(U||!J?"pi-hidden":"")},C.default.createElement("div",{className:"pi-rounded-full pi-bg-gray-700 dark:pi-bg-gray-200 pi-w-12 pi-h-12 pi-flex pi-items-center pi-justify-center"},C.default.createElement("span",{className:"pi-text-base pi-text-gray-50 dark:pi-text-gray-900"},E.getInitials(ne.name||"-")))),C.default.createElement("video",{muted:!0,autoPlay:!0,ref:Se,className:"pi-max-w-32 pi-max-h-32 pi-absolute pi-top-32 pi-right-5 pi-rounded-lg ".concat(!Q||B?"pi-hidden":"")}),C.default.createElement("div",{className:"pi-w-32 pi-h-24 pi-absolute pi-top-32 pi-right-5 pi-rounded-lg pi-bg-gray-200 dark:pi-bg-gray-900 pi-flex pi-items-center pi-justify-center ".concat(Q&&B&&J?"":"pi-hidden")},C.default.createElement("div",{className:"pi-rounded-full pi-bg-gray-700 dark:pi-bg-gray-200 pi-w-12 pi-h-12 pi-flex pi-items-center pi-justify-center"},C.default.createElement("span",{className:"pi-text-base pi-text-gray-50 dark:pi-text-gray-900"},E.getInitials(z))))),C.default.createElement("div",{className:"".concat(!ce&&"pi-opacity-0 pi-pointer-events-none"," pi-absolute pi-bottom-0 pi-bg-gray-950/65 pi-w-full pi-p-6 pi-rounded-bl-[20px] pi-rounded-br-[20px] pi-transition-all")},C.default.createElement("div",{className:"pi-flex pi-items-center pi-justify-center pi-gap-6 pi-mb-5"},!(null==$?void 0:$.isListen)&&C.default.createElement(r.Button,{variant:"default",active:!!_,onClick:function(){return _?d.unmuteCurrentCall():d.muteCurrentCall()},"data-tooltip-id":"tooltip-mute","data-tooltip-content":"".concat(_?o.t("Tooltip.Unmute"):o.t("Tooltip.Mute"))},_?C.default.createElement(n.FontAwesomeIcon,{className:"pi-h-6 pi-w-6",icon:i.faMicrophoneSlash}):C.default.createElement(n.FontAwesomeIcon,{className:"pi-h-6 pi-w-6",icon:i.faMicrophone})),(null==Ee?void 0:Ee.length)>0&&C.default.createElement(r.Button,{variant:"default",onClick:function(){return e.__awaiter(void 0,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return[4,Fe()];case 1:return e.sent()&&(U?xe():ke()),[2]}}))}))},"data-tooltip-id":"tooltip-toggle-video","data-tooltip-content":"".concat(Ae?U?o.t("Tooltip.Disable camera"):o.t("Tooltip.Enable camera"):o.t("Tooltip.Enable camera permission")||""),disabled:!Ae,className:"".concat(Ae?"":"pi-cursor-auto")},C.default.createElement(n.FontAwesomeIcon,{className:"pi-h-6 pi-w-6",icon:Ae||U?i.faVideo:i.faVideoSlash})),"safari"!==be.current.webRTCAdapter.browserDetails.browser&&(null===(N=null===(j=null===(x=null===(k=null===(T=null==ne?void 0:ne.profile)||void 0===T?void 0:T.macro_permissions)||void 0===k?void 0:k.nethvoice_cti)||void 0===x?void 0:x.permissions)||void 0===j?void 0:j.screen_sharing)||void 0===N?void 0:N.value)&&!Q&&C.default.createElement(r.Button,{variant:"default",onClick:function(){return Ve()},"data-tooltip-id":"tooltip-start-screen-share","data-tooltip-content":o.t("Tooltip.Share screen")||""},C.default.createElement(n.FontAwesomeIcon,{className:"pi-h-6 pi-w-6",icon:i.faDisplay})),Q&&"publisher"===K&&C.default.createElement(r.Button,{variant:"default",onClick:function(){return Pe()},"data-tooltip-id":"tooltip-stop-screen-share","data-tooltip-content":o.t("Tooltip.Stop sharing")},C.default.createElement(n.FontAwesomeIcon,{className:"pi-h-6 pi-w-6",icon:S.faDisplaySlash})),Q&&"listener"===K&&C.default.createElement(r.Button,{variant:"default",onClick:function(){return Te()},"data-tooltip-id":"tooltip-toggle-fullscreen","data-tooltip-content":oe?o.t("Tooltip.Exit fullscreen"):o.t("Tooltip.Enter fullscreen")},C.default.createElement(n.FontAwesomeIcon,{className:"pi-h-6 pi-w-6",icon:oe?i.faCompress:i.faExpand})),(null===(D=null===(R=null===(I=null===(V=null===(q=null==ne?void 0:ne.profile)||void 0===q?void 0:q.macro_permissions)||void 0===V?void 0:V.settings)||void 0===I?void 0:I.permissions)||void 0===R?void 0:R.recording)||void 0===D?void 0:D.value)&&C.default.createElement(r.Button,{variant:"default",onClick:function(){return d.recordCurrentCall(M)},"data-tooltip-id":"tooltip-record-video-view","data-tooltip-content":M?o.t("Tooltip.Stop recording"):o.t("Tooltip.Record")},C.default.createElement(n.FontAwesomeIcon,{className:"pi-h-6 pi-w-6",icon:M?i.faStop:S.faRecord})),!((null==$?void 0:$.isIntrude)||(null==$?void 0:$.isListen))&&C.default.createElement(r.Button,{variant:"default",onClick:function(){return F?d.unpauseCurrentCall():(d.pauseCurrentCall(),void Pe())},"data-tooltip-id":"tooltip-pause-video-view","data-tooltip-content":F?o.t("Tooltip.Play"):o.t("Tooltip.Pause")},C.default.createElement(n.FontAwesomeIcon,{className:"pi-h-6 pi-w-6",icon:F?i.faPlay:i.faPause}))),C.default.createElement(u.default,{buttonsVariant:"default"})),C.default.createElement(h.CustomThemedTooltip,{className:"pi-z-20",id:"tooltip-mute-video-view",place:"bottom"}),C.default.createElement(h.CustomThemedTooltip,{className:"pi-z-20",id:"tooltip-toggle-video",place:"bottom"}),C.default.createElement(h.CustomThemedTooltip,{className:"pi-z-20",id:"tooltip-toggle-fullscreen",place:"bottom"}),C.default.createElement(h.CustomThemedTooltip,{className:"pi-z-20",id:"tooltip-start-screen-share",place:"bottom"}),C.default.createElement(h.CustomThemedTooltip,{className:"pi-z-20",id:"tooltip-stop-screen-share",place:"bottom"}),C.default.createElement(h.CustomThemedTooltip,{className:"pi-z-20",id:"tooltip-record-video-view",place:"bottom"}),C.default.createElement(h.CustomThemedTooltip,{className:"pi-z-20",id:"tooltip-pause-video-view",place:"bottom"})):C.default.createElement(C.default.Fragment,null,C.default.createElement("div",{className:"pi-flex pi-justify-between pi-items-center"},C.default.createElement(m.default,null),C.default.createElement(f.default,{startTime:A,isNotAlwaysWhite:!0}),!ee&&ae&&!v.isPhysical()&&C.default.createElement(g.AudioBars,{audioStream:ae,paused:F,size:ee?"large":"small"}))))};exports.VideoView=k,exports.default=k;
//# sourceMappingURL=index.js.map
