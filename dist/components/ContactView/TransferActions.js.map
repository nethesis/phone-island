{"version":3,"file":"TransferActions.js","sources":["../../../src/components/ContactView/TransferActions.tsx"],"sourcesContent":["// Copyright (C) 2024 Nethesis S.r.l.\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\nimport React, { type FC } from 'react'\nimport { Button } from '../Button'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faArrowsRepeat } from '@nethesis/nethesis-solid-svg-icons'\nimport { sendDTMF } from '../../lib/webrtc/messages'\nimport { store, Dispatch } from '../../store'\nimport { useDispatch, useSelector } from 'react-redux'\nimport outgoingRingtone from '../../static/outgoing_ringtone'\nimport { RootState } from '../../store'\nimport { useTranslation } from 'react-i18next'\nimport { useEventListener, eventDispatch } from '../../utils'\nimport { CustomThemedTooltip } from '../CustomThemedTooltip'\n\n//// TODO this component and related events seems unused, remove?\n\nexport const TransferActions: FC<TransferActionsProps> = () => {\n  const dispatch = useDispatch<Dispatch>()\n  const { transferCalls, number } = useSelector((state: RootState) => state.currentCall)\n\n  // Cancels the current transfer through dtmfs\n  function switchTransfer() {\n    dispatch.currentCall.updateTransferSwitching(true)\n    // Start sending the DTMFs for transferring\n    sendDTMF('*')\n    const { audioPlayerPlaying } = store.getState().player\n    // Check if the local audio is already playing and start playing\n    if (!audioPlayerPlaying) {\n      dispatch.player.updateStartAudioPlayer({\n        src: outgoingRingtone,\n        loop: true,\n      })\n    }\n    setTimeout(() => {\n      // Send the second DTMF for transferring\n      sendDTMF('4')\n      dispatch.player.stopAudioPlayer()\n\n      eventDispatch('phone-island-call-transfer-switched', {})\n    }, 500)\n  }\n  useEventListener('phone-island-call-transfer-switch', () => {\n    switchTransfer()\n  })\n\n  const { t } = useTranslation()\n\n  return (\n    <>\n      <div className='pi-grid pi-grid-cols-3 pi-auto-cols-max pi-gap-y-5 pi-justify-items-center pi-place-items-center pi-justify-center'>\n        <div></div>\n        <Button\n          onClick={switchTransfer}\n          variant='default'\n          data-tooltip-id='transfer-actions-tooltip'\n          data-tooltip-content={t('Tooltip.Switch call') || ''}\n        >\n          <FontAwesomeIcon className='pi-h-6 pi-w-6' icon={faArrowsRepeat} />\n        </Button>\n        <div></div>\n      </div>\n      <CustomThemedTooltip className='pi-z-1000' id='transfer-actions-tooltip' place='bottom' />\n    </>\n  )\n}\n\ninterface TransferActionsProps {}\n\ninterface CurrentCallsTypes {\n  [name: string]: {\n    name: string\n    time: string\n  }\n}\n"],"names":["dispatch","useDispatch","_a","useSelector","state","currentCall","switchTransfer","updateTransferSwitching","sendDTMF","store","getState","player","audioPlayerPlaying","updateStartAudioPlayer","src","outgoingRingtone","loop","setTimeout","stopAudioPlayer","eventDispatch","useEventListener","t","useTranslation","React","createElement","Fragment","className","Button","onClick","variant","FontAwesomeIcon","icon","faArrowsRepeat","CustomThemedTooltip","id","place"],"mappings":"80CAkByD,WACvD,IAAMA,EAAWC,EAAAA,cACXC,EAA4BC,EAAWA,aAAC,SAACC,GAAqB,OAAAA,EAAMC,WAAN,IAGpE,SAASC,IACPN,EAASK,YAAYE,yBAAwB,GAE7CC,EAAQA,SAAC,KACsBC,EAAKA,MAACC,WAAWC,OAAMC,oBAGpDZ,EAASW,OAAOE,uBAAuB,CACrCC,IAAKC,EAAgB,QACrBC,MAAM,IAGVC,YAAW,WAETT,EAAQA,SAAC,KACTR,EAASW,OAAOO,kBAEhBC,gBAAc,sCAAuC,CAAA,EACtD,GAAE,IACJ,0BACDC,EAAgBA,iBAAC,qCAAqC,WACpDd,GACF,IAEQ,IAAAe,EAAMC,qBAEd,OACEC,UAAAC,cAAAD,EAAA,QAAAE,SAAA,KACEF,EAAAA,QAAKC,cAAA,MAAA,CAAAE,UAAU,sHACbH,UAAWC,cAAA,MAAA,MACXD,EAAAA,QAAAC,cAACG,EAAAA,OACC,CAAAC,QAAStB,EACTuB,QAAQ,UAAS,kBACD,2BACM,uBAAAR,EAAE,wBAA0B,IAElDE,UAACC,cAAAM,EAAAA,gBAAgB,CAAAJ,UAAU,gBAAgBK,KAAMC,EAAcA,kBAEjET,EAAAA,QAAAC,cAAA,MAAA,OAEFD,EAAAA,QAAAC,cAACS,sBAAoB,CAAAP,UAAU,YAAYQ,GAAG,2BAA2BC,MAAM,WAGrF"}