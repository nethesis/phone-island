{"version":3,"file":"use-outside-click.js","sources":["../../../../../../node_modules/@headlessui/react/dist/hooks/use-outside-click.js"],"sourcesContent":["import{useCallback as T,useRef as d}from\"react\";import{FocusableMode as y,isFocusableElement as M}from'../utils/focus-management.js';import{isMobile as g}from'../utils/platform.js';import{useDocumentEvent as c}from'./use-document-event.js';import{useIsTopLayer as L}from'./use-is-top-layer.js';import{useLatestValue as b}from'./use-latest-value.js';import{useWindowEvent as P}from'./use-window-event.js';const E=30;function R(p,f,C){let u=L(p,\"outside-click\"),m=b(C),s=T(function(e,n){if(e.defaultPrevented)return;let r=n(e);if(r===null||!r.getRootNode().contains(r)||!r.isConnected)return;let h=function l(o){return typeof o==\"function\"?l(o()):Array.isArray(o)||o instanceof Set?o:[o]}(f);for(let l of h)if(l!==null&&(l.contains(r)||e.composed&&e.composedPath().includes(l)))return;return!M(r,y.Loose)&&r.tabIndex!==-1&&e.preventDefault(),m.current(e,r)},[m,f]),i=d(null);c(u,\"pointerdown\",t=>{var e,n;i.current=((n=(e=t.composedPath)==null?void 0:e.call(t))==null?void 0:n[0])||t.target},!0),c(u,\"mousedown\",t=>{var e,n;i.current=((n=(e=t.composedPath)==null?void 0:e.call(t))==null?void 0:n[0])||t.target},!0),c(u,\"click\",t=>{g()||i.current&&(s(t,()=>i.current),i.current=null)},!0);let a=d({x:0,y:0});c(u,\"touchstart\",t=>{a.current.x=t.touches[0].clientX,a.current.y=t.touches[0].clientY},!0),c(u,\"touchend\",t=>{let e={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY};if(!(Math.abs(e.x-a.current.x)>=E||Math.abs(e.y-a.current.y)>=E))return s(t,()=>t.target instanceof HTMLElement?t.target:null)},!0),P(u,\"blur\",t=>s(t,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}export{R as useOutsideClick};\n"],"names":["p","f","C","u","L","m","b","useLatestValue","s","T","useCallback","e","n","defaultPrevented","r","getRootNode","contains","isConnected","h","l","o","Array","isArray","Set","composed","composedPath","includes","M","isFocusableElement","y","FocusableMode","Loose","tabIndex","preventDefault","current","i","d","c","t","call","target","g","a","x","touches","clientX","clientY","changedTouches","Math","abs","HTMLElement","P","window","document","activeElement","HTMLIFrameElement"],"mappings":"6UAA+Z,SAAWA,EAAEC,EAAEC,GAAG,IAAIC,EAAEC,EAAAA,cAAEJ,EAAE,iBAAiBK,EAAEC,EAACC,eAACL,GAAGM,EAAEC,EAACC,aAAC,SAASC,EAAEC,GAAG,GAAGD,EAAEE,iBAAiB,OAAO,IAAIC,EAAEF,EAAED,GAAG,GAAO,OAAJG,IAAWA,EAAEC,cAAcC,SAASF,KAAKA,EAAEG,YAAY,OAAO,IAAIC,EAAE,SAASC,EAAEC,GAAG,MAAiB,mBAAHA,EAAcD,EAAEC,KAAKC,MAAMC,QAAQF,IAAIA,aAAaG,IAAIH,EAAE,CAACA,EAAG,CAA1F,CAA2FnB,GAAG,IAAI,IAAIkB,KAAKD,EAAE,GAAO,OAAJC,IAAWA,EAAEH,SAASF,IAAIH,EAAEa,UAAUb,EAAEc,eAAeC,SAASP,IAAI,OAAO,OAAOQ,EAACC,mBAACd,EAAEe,EAACC,cAACC,SAAsB,IAAdjB,EAAEkB,UAAerB,EAAEsB,iBAAiB5B,EAAE6B,QAAQvB,EAAEG,EAAE,GAAE,CAACT,EAAEJ,IAAIkC,EAAEC,EAAAA,OAAE,MAAMC,mBAAElC,EAAE,eAAcmC,IAAI,IAAI3B,EAAEC,EAAEuB,EAAED,SAAwD,OAA9CtB,EAAsB,OAAnBD,EAAE2B,EAAEb,mBAAoB,EAAOd,EAAE4B,KAAKD,SAAU,EAAO1B,EAAE,KAAK0B,EAAEE,MAAM,IAAE,GAAIH,EAAAA,iBAAElC,EAAE,aAAYmC,IAAI,IAAI3B,EAAEC,EAAEuB,EAAED,SAAwD,OAA9CtB,EAAsB,OAAnBD,EAAE2B,EAAEb,mBAAoB,EAAOd,EAAE4B,KAAKD,SAAU,EAAO1B,EAAE,KAAK0B,EAAEE,MAAM,IAAE,GAAIH,EAAAA,iBAAElC,EAAE,SAAQmC,IAAIG,EAAAA,YAAKN,EAAED,UAAU1B,EAAE8B,GAAE,IAAIH,EAAED,UAASC,EAAED,QAAQ,KAAK,IAAE,GAAI,IAAIQ,EAAEN,EAAAA,OAAE,CAACO,EAAE,EAAEd,EAAE,IAAIQ,mBAAElC,EAAE,cAAamC,IAAII,EAAER,QAAQS,EAAEL,EAAEM,QAAQ,GAAGC,QAAQH,EAAER,QAAQL,EAAES,EAAEM,QAAQ,GAAGE,OAAO,IAAE,GAAIT,EAAAA,iBAAElC,EAAE,YAAWmC,IAAI,IAAI3B,EAAK2B,EAAES,eAAe,GAAGF,QAAzBlC,EAAmC2B,EAAES,eAAe,GAAGD,QAAS,KAAKE,KAAKC,IAAItC,EAAI+B,EAAER,QAAQS,IAAx+B,IAA++BK,KAAKC,IAAItC,EAAI+B,EAAER,QAAQL,IAAtgC,IAA6gC,OAAOrB,EAAE8B,GAAE,IAAIA,EAAEE,kBAAkBU,YAAYZ,EAAEE,OAAO,MAAK,IAAE,GAAIW,iBAAEhD,EAAE,QAAOmC,GAAG9B,EAAE8B,GAAE,IAAIc,OAAOC,SAASC,yBAAyBC,kBAAkBH,OAAOC,SAASC,cAAc,SAAM,EAAG"}