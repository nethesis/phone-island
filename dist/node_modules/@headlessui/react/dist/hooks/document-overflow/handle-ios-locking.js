"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../utils/disposables.js"),t=require("../../utils/platform.js");exports.handleIOSLocking=function(){return t.isIOS()?{before({doc:t,d:l,meta:n}){function r(e){return n.containers.flatMap((e=>e())).some((t=>t.contains(e)))}l.microTask((()=>{var n;if("auto"!==window.getComputedStyle(t.documentElement).scrollBehavior){let n=e.disposables();n.style(t.documentElement,"scrollBehavior","auto"),l.add((()=>l.microTask((()=>n.dispose()))))}let a=null!=(n=window.scrollY)?n:window.pageYOffset,o=null;l.addEventListener(t,"click",(e=>{if(e.target instanceof HTMLElement)try{let l=e.target.closest("a");if(!l)return;let{hash:n}=new URL(l.href),a=t.querySelector(n);a&&!r(a)&&(o=a)}catch{}}),!0),l.addEventListener(t,"touchstart",(e=>{if(e.target instanceof HTMLElement)if(r(e.target)){let t=e.target;for(;t.parentElement&&r(t.parentElement);)t=t.parentElement;l.style(t,"overscrollBehavior","contain")}else l.style(e.target,"touchAction","none")})),l.addEventListener(t,"touchmove",(e=>{if(e.target instanceof HTMLElement){if("INPUT"===e.target.tagName)return;if(r(e.target)){let t=e.target;for(;t.parentElement&&""!==t.dataset.headlessuiPortal&&!(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth);)t=t.parentElement;""===t.dataset.headlessuiPortal&&e.preventDefault()}else e.preventDefault()}}),{passive:!1}),l.add((()=>{var e;let t=null!=(e=window.scrollY)?e:window.pageYOffset;a!==t&&window.scrollTo(0,a),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)}))}))}}:{}};
//# sourceMappingURL=handle-ios-locking.js.map
