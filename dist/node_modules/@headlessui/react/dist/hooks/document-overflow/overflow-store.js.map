{"version":3,"file":"overflow-store.js","sources":["../../../../../../../node_modules/@headlessui/react/dist/hooks/document-overflow/overflow-store.js"],"sourcesContent":["import{disposables as s}from'../../utils/disposables.js';import{createStore as i}from'../../utils/store.js';import{adjustScrollbarPadding as l}from'./adjust-scrollbar-padding.js';import{handleIOSLocking as d}from'./handle-ios-locking.js';import{preventScroll as p}from'./prevent-scroll.js';function m(e){let n={};for(let t of e)Object.assign(n,t(n));return n}let a=i(()=>new Map,{PUSH(e,n){var o;let t=(o=this.get(e))!=null?o:{doc:e,count:0,d:s(),meta:new Set};return t.count++,t.meta.add(n),this.set(e,t),this},POP(e,n){let t=this.get(e);return t&&(t.count--,t.meta.delete(n)),this},SCROLL_PREVENT({doc:e,d:n,meta:t}){let o={doc:e,d:n,meta:m(t)},c=[d(),l(),p()];c.forEach(({before:r})=>r==null?void 0:r(o)),c.forEach(({after:r})=>r==null?void 0:r(o))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});a.subscribe(()=>{let e=a.getSnapshot(),n=new Map;for(let[t]of e)n.set(t,t.documentElement.style.overflow);for(let t of e.values()){let o=n.get(t.doc)===\"hidden\",c=t.count!==0;(c&&!o||!c&&o)&&a.dispatch(t.count>0?\"SCROLL_PREVENT\":\"SCROLL_ALLOW\",t),t.count===0&&a.dispatch(\"TEARDOWN\",t)}});export{a as overflows};\n"],"names":["m","e","n","t","Object","assign","a","i","createStore","Map","PUSH","o","this","get","doc","count","d","s","meta","Set","add","set","POP","delete","SCROLL_PREVENT","c","l","adjustScrollbarPadding","p","forEach","before","r","after","SCROLL_ALLOW","dispose","TEARDOWN","subscribe","getSnapshot","documentElement","style","overflow","values","dispatch"],"mappings":"mQAAkS,SAASA,EAAEC,GAAG,IAAIC,EAAE,CAAA,EAAG,IAAI,IAAIC,KAAKF,EAAEG,OAAOC,OAAOH,EAAEC,EAAED,IAAI,OAAOA,CAAC,CAAKI,IAAAA,EAAEC,EAACC,aAAC,IAAI,IAAIC,KAAI,CAACC,IAAAA,CAAKT,EAAEC,GAAG,IAAIS,EAAE,IAAIR,EAAmB,OAAhBQ,EAAEC,KAAKC,IAAIZ,IAAUU,EAAE,CAACG,IAAIb,EAAEc,MAAM,EAAEC,EAAEC,EAAAA,cAAIC,KAAK,IAAIC,KAAK,OAAOhB,EAAEY,QAAQZ,EAAEe,KAAKE,IAAIlB,GAAGU,KAAKS,IAAIpB,EAAEE,GAAGS,IAAK,EAACU,GAAAA,CAAIrB,EAAEC,GAAG,IAAIC,EAAES,KAAKC,IAAIZ,GAAG,OAAOE,IAAIA,EAAEY,QAAQZ,EAAEe,KAAKK,OAAOrB,IAAIU,IAAK,EAACY,cAAAA,EAAgBV,IAAIb,EAAEe,EAAEd,EAAEgB,KAAKf,IAAI,IAAIQ,EAAE,CAACG,IAAIb,EAAEe,EAAEd,EAAEgB,KAAKlB,EAAEG,IAAIsB,EAAE,CAACT,EAAAA,mBAAIU,EAACC,yBAAGC,EAAAA,iBAAKH,EAAEI,SAAQ,EAAEC,OAAOC,KAAQ,MAAHA,OAAQ,EAAOA,EAAEpB,KAAIc,EAAEI,SAAQ,EAAEG,MAAMD,KAAQ,MAAHA,OAAQ,EAAOA,EAAEpB,IAAI,EAACsB,YAAAA,EAAcjB,EAAEf,IAAIA,EAAEiC,SAAU,EAACC,QAAAA,EAAUrB,IAAIb,IAAIW,KAAKW,OAAOtB,EAAE,IAAIK,EAAE8B,WAAU,KAAK,IAAInC,EAAEK,EAAE+B,cAAcnC,EAAE,IAAIO,IAAI,IAAI,IAAIN,KAAKF,EAAEC,EAAEmB,IAAIlB,EAAEA,EAAEmC,gBAAgBC,MAAMC,UAAU,IAAI,IAAIrC,KAAKF,EAAEwC,SAAS,CAAC,IAAI9B,EAAiB,WAAfT,EAAEW,IAAIV,EAAEW,KAAgBW,EAAY,IAAVtB,EAAEY,OAAWU,IAAId,IAAIc,GAAGd,IAAIL,EAAEoC,SAASvC,EAAEY,MAAM,EAAE,iBAAiB,eAAeZ,GAAa,IAAVA,EAAEY,OAAWT,EAAEoC,SAAS,WAAWvC,EAAE"}