{"version":3,"file":"handle-ios-locking.js","sources":["../../../../../../../node_modules/@headlessui/react/dist/hooks/document-overflow/handle-ios-locking.js"],"sourcesContent":["import{disposables as m}from'../../utils/disposables.js';import{isIOS as u}from'../../utils/platform.js';function d(){return u()?{before({doc:r,d:n,meta:c}){function o(a){return c.containers.flatMap(l=>l()).some(l=>l.contains(a))}n.microTask(()=>{var s;if(window.getComputedStyle(r.documentElement).scrollBehavior!==\"auto\"){let t=m();t.style(r.documentElement,\"scrollBehavior\",\"auto\"),n.add(()=>n.microTask(()=>t.dispose()))}let a=(s=window.scrollY)!=null?s:window.pageYOffset,l=null;n.addEventListener(r,\"click\",t=>{if(t.target instanceof HTMLElement)try{let e=t.target.closest(\"a\");if(!e)return;let{hash:f}=new URL(e.href),i=r.querySelector(f);i&&!o(i)&&(l=i)}catch{}},!0),n.addEventListener(r,\"touchstart\",t=>{if(t.target instanceof HTMLElement)if(o(t.target)){let e=t.target;for(;e.parentElement&&o(e.parentElement);)e=e.parentElement;n.style(e,\"overscrollBehavior\",\"contain\")}else n.style(t.target,\"touchAction\",\"none\")}),n.addEventListener(r,\"touchmove\",t=>{if(t.target instanceof HTMLElement){if(t.target.tagName===\"INPUT\")return;if(o(t.target)){let e=t.target;for(;e.parentElement&&e.dataset.headlessuiPortal!==\"\"&&!(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth);)e=e.parentElement;e.dataset.headlessuiPortal===\"\"&&t.preventDefault()}else t.preventDefault()}},{passive:!1}),n.add(()=>{var e;let t=(e=window.scrollY)!=null?e:window.pageYOffset;a!==t&&window.scrollTo(0,a),l&&l.isConnected&&(l.scrollIntoView({block:\"nearest\"}),l=null)})})}}:{}}export{d as handleIOSLocking};\n"],"names":["u","isIOS","before","doc","r","d","n","meta","c","o","a","containers","flatMap","l","some","contains","microTask","s","window","getComputedStyle","documentElement","scrollBehavior","t","m","style","add","dispose","scrollY","pageYOffset","addEventListener","target","HTMLElement","e","closest","hash","f","URL","href","i","querySelector","parentElement","tagName","dataset","headlessuiPortal","scrollHeight","clientHeight","scrollWidth","clientWidth","preventDefault","passive","scrollTo","isConnected","scrollIntoView","block"],"mappings":"8KAAyG,WAAa,OAAOA,EAACC,QAAG,CAACC,MAAAA,EAAQC,IAAIC,EAAEC,EAAEC,EAAEC,KAAKC,IAAI,SAASC,EAAEC,GAAG,OAAOF,EAAEG,WAAWC,SAAQC,GAAGA,MAAKC,MAAKD,GAAGA,EAAEE,SAASL,IAAG,CAACJ,EAAEU,WAAU,KAAK,IAAIC,EAAE,GAA+D,SAA5DC,OAAOC,iBAAiBf,EAAEgB,iBAAiBC,eAAwB,CAAC,IAAIC,EAAEC,EAAAA,cAAID,EAAEE,MAAMpB,EAAEgB,gBAAgB,iBAAiB,QAAQd,EAAEmB,KAAI,IAAInB,EAAEU,WAAU,IAAIM,EAAEI,aAAW,CAAC,IAAIhB,EAAsB,OAAnBO,EAAEC,OAAOS,SAAeV,EAAEC,OAAOU,YAAYf,EAAE,KAAKP,EAAEuB,iBAAiBzB,EAAE,SAAQkB,IAAI,GAAGA,EAAEQ,kBAAkBC,YAAY,IAAI,IAAIC,EAAEV,EAAEQ,OAAOG,QAAQ,KAAK,IAAID,EAAE,OAAO,IAAIE,KAAKC,GAAG,IAAIC,IAAIJ,EAAEK,MAAMC,EAAElC,EAAEmC,cAAcJ,GAAGG,IAAI7B,EAAE6B,KAAKzB,EAAEyB,EAAG,OAAM,KAAG,GAAIhC,EAAEuB,iBAAiBzB,EAAE,cAAakB,IAAI,GAAGA,EAAEQ,kBAAkBC,YAAY,GAAGtB,EAAEa,EAAEQ,QAAQ,CAAC,IAAIE,EAAEV,EAAEQ,OAAO,KAAKE,EAAEQ,eAAe/B,EAAEuB,EAAEQ,gBAAgBR,EAAEA,EAAEQ,cAAclC,EAAEkB,MAAMQ,EAAE,qBAAqB,UAAU,MAAM1B,EAAEkB,MAAMF,EAAEQ,OAAO,cAAc,OAAO,IAAGxB,EAAEuB,iBAAiBzB,EAAE,aAAYkB,IAAI,GAAGA,EAAEQ,kBAAkBC,YAAY,CAAC,GAAsB,UAAnBT,EAAEQ,OAAOW,QAAkB,OAAO,GAAGhC,EAAEa,EAAEQ,QAAQ,CAAC,IAAIE,EAAEV,EAAEQ,OAAO,KAAKE,EAAEQ,eAA4C,KAA7BR,EAAEU,QAAQC,oBAAyBX,EAAEY,aAAaZ,EAAEa,cAAcb,EAAEc,YAAYd,EAAEe,cAAcf,EAAEA,EAAEQ,cAA2C,KAA7BR,EAAEU,QAAQC,kBAAuBrB,EAAE0B,gBAAgB,MAAM1B,EAAE0B,gBAAgB,IAAG,CAACC,SAAQ,IAAK3C,EAAEmB,KAAI,KAAK,IAAIO,EAAE,IAAIV,EAAsB,OAAnBU,EAAEd,OAAOS,SAAeK,EAAEd,OAAOU,YAAYlB,IAAIY,GAAGJ,OAAOgC,SAAS,EAAExC,GAAGG,GAAGA,EAAEsC,cAActC,EAAEuC,eAAe,CAACC,MAAM,YAAYxC,EAAE,KAAK,GAAE,GAAE,GAAG,EAAE"}