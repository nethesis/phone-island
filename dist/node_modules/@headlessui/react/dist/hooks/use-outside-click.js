"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("../utils/focus-management.js"),n=require("../utils/platform.js"),u=require("./use-document-event.js"),r=require("./use-is-top-layer.js"),o=require("./use-latest-value.js"),c=require("./use-window-event.js");exports.useOutsideClick=function(s,l,i){let a=r.useIsTopLayer(s,"outside-click"),d=o.useLatestValue(i),m=e.useCallback((function(e,n){if(e.defaultPrevented)return;let u=n(e);if(null===u||!u.getRootNode().contains(u)||!u.isConnected)return;let r=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(l);for(let t of r)if(null!==t&&(t.contains(u)||e.composed&&e.composedPath().includes(t)))return;return!t.isFocusableElement(u,t.FocusableMode.Loose)&&-1!==u.tabIndex&&e.preventDefault(),d.current(e,u)}),[d,l]),f=e.useRef(null);u.useDocumentEvent(a,"pointerdown",(e=>{var t,n;f.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target}),!0),u.useDocumentEvent(a,"mousedown",(e=>{var t,n;f.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target}),!0),u.useDocumentEvent(a,"click",(e=>{n.isMobile()||f.current&&(m(e,(()=>f.current)),f.current=null)}),!0);let v=e.useRef({x:0,y:0});u.useDocumentEvent(a,"touchstart",(e=>{v.current.x=e.touches[0].clientX,v.current.y=e.touches[0].clientY}),!0),u.useDocumentEvent(a,"touchend",(e=>{let t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;if(!(Math.abs(t-v.current.x)>=30||Math.abs(n-v.current.y)>=30))return m(e,(()=>e.target instanceof HTMLElement?e.target:null))}),!0),c.useWindowEvent(a,"blur",(e=>m(e,(()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null))),!0)};
//# sourceMappingURL=use-outside-click.js.map
