{"version":3,"file":"use-transition.js","sources":["../../../../../../node_modules/@headlessui/react/dist/hooks/use-transition.js"],"sourcesContent":["var T,b;import{useRef as c,useState as S}from\"react\";import{disposables as m}from'../utils/disposables.js';import{useDisposables as g}from'./use-disposables.js';import{useFlags as y}from'./use-flags.js';import{useIsoMorphicEffect as A}from'./use-iso-morphic-effect.js';typeof process!=\"undefined\"&&typeof globalThis!=\"undefined\"&&typeof Element!=\"undefined\"&&((T=process==null?void 0:process.env)==null?void 0:T[\"NODE_ENV\"])===\"test\"&&typeof((b=Element==null?void 0:Element.prototype)==null?void 0:b.getAnimations)==\"undefined\"&&(Element.prototype.getAnimations=function(){return console.warn([\"Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.\",\"Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.\",\"\",\"Example usage:\",\"```js\",\"import { mockAnimationsApi } from 'jsdom-testing-mocks'\",\"mockAnimationsApi()\",\"```\"].join(`\n`)),[]});var L=(r=>(r[r.None=0]=\"None\",r[r.Closed=1]=\"Closed\",r[r.Enter=2]=\"Enter\",r[r.Leave=4]=\"Leave\",r))(L||{});function R(t){let n={};for(let e in t)t[e]===!0&&(n[`data-${e}`]=\"\");return n}function x(t,n,e,i){let[r,o]=S(e),{hasFlag:s,addFlag:a,removeFlag:l}=y(t&&r?3:0),u=c(!1),f=c(!1),E=g();return A(()=>{var d;if(t){if(e&&o(!0),!n){e&&a(3);return}return(d=i==null?void 0:i.start)==null||d.call(i,e),C(n,{inFlight:u,prepare(){f.current?f.current=!1:f.current=u.current,u.current=!0,!f.current&&(e?(a(3),l(4)):(a(4),l(2)))},run(){f.current?e?(l(3),a(4)):(l(4),a(3)):e?l(1):a(1)},done(){var p;f.current&&typeof n.getAnimations==\"function\"&&n.getAnimations().length>0||(u.current=!1,l(7),e||o(!1),(p=i==null?void 0:i.end)==null||p.call(i,e))}})}},[t,e,n,E]),t?[r,{closed:s(1),enter:s(2),leave:s(4),transition:s(2)||s(4)}]:[e,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function C(t,{prepare:n,run:e,done:i,inFlight:r}){let o=m();return j(t,{prepare:n,inFlight:r}),o.nextFrame(()=>{e(),o.requestAnimationFrame(()=>{o.add(M(t,i))})}),o.dispose}function M(t,n){var o,s;let e=m();if(!t)return e.dispose;let i=!1;e.add(()=>{i=!0});let r=(s=(o=t.getAnimations)==null?void 0:o.call(t).filter(a=>a instanceof CSSTransition))!=null?s:[];return r.length===0?(n(),e.dispose):(Promise.allSettled(r.map(a=>a.finished)).then(()=>{i||n()}),e.dispose)}function j(t,{inFlight:n,prepare:e}){if(n!=null&&n.current){e();return}let i=t.style.transition;t.style.transition=\"none\",e(),t.offsetHeight,t.style.transition=i}export{R as transitionDataAttributes,x as useTransition};\n"],"names":["T","b","process","globalThis","Element","env","prototype","getAnimations","console","warn","join","r","L","None","Closed","Enter","Leave","t","n","e","i","o","S","hasFlag","s","addFlag","a","removeFlag","l","y","useFlags","u","c","f","E","g","useDisposables","A","useIsoMorphicEffect","d","start","call","prepare","run","done","inFlight","m","current","style","transition","offsetHeight","j","nextFrame","requestAnimationFrame","add","dispose","filter","CSSTransition","length","Promise","allSettled","map","finished","then","M","C","p","end","closed","enter","leave"],"mappings":"wEAAIA,EAAEC,iKAAuR,oBAATC,SAAyC,oBAAZC,YAAyC,oBAATC,SAA0F,UAA7B,OAArCJ,EAAW,MAATE,aAAc,EAAOA,QAAQG,UAAW,EAAOL,EAAY,gBAA8F,KAA9B,OAA3CC,EAAW,MAATG,aAAc,EAAOA,QAAQE,gBAAiB,EAAOL,EAAEM,iBAA8BH,QAAQE,UAAUC,cAAc,WAAW,OAAOC,QAAQC,KAAK,CAAC,+EAA+E,0FAA0F,GAAG,iBAAiB,QAAQ,0DAA0D,sBAAsB,OAAOC,KAAK,OAC/2B,EAAE,GAAG,IAAOC,EAAHC,IAAGD,EAA4FC,GAAG,CAAE,GAA3FD,EAAEE,KAAK,GAAG,OAAOF,EAAEA,EAAEG,OAAO,GAAG,SAASH,EAAEA,EAAEI,MAAM,GAAG,QAAQJ,EAAEA,EAAEK,MAAM,GAAG,QAAQL,oCAAW,SAAWM,GAAG,IAAIC,EAAE,CAAA,EAAG,IAAI,IAAIC,KAAKF,GAAS,IAAPA,EAAEE,KAAUD,EAAE,QAAQC,KAAK,IAAI,OAAOD,CAAC,wBAAC,SAAWD,EAAEC,EAAEC,EAAEC,GAAG,IAAIT,EAAEU,GAAGC,EAAAA,SAAEH,IAAII,QAAQC,EAAEC,QAAQC,EAAEC,WAAWC,GAAGC,EAACC,SAACb,GAAGN,EAAE,EAAE,GAAGoB,EAAEC,EAAAA,QAAE,GAAIC,EAAED,EAAAA,QAAE,GAAIE,EAAEC,EAACC,iBAAG,OAAOC,EAACC,qBAAC,KAAK,IAAIC,EAAE,GAAGtB,EAAG,OAAGE,GAAGE,GAAE,GAAKH,GAAoD,OAA3BqB,EAAK,MAAHnB,OAAQ,EAAOA,EAAEoB,QAAcD,EAAEE,KAAKrB,EAAED,GAAse,SAAWF,GAAGyB,QAAQxB,EAAEyB,IAAIxB,EAAEyB,KAAKxB,EAAEyB,SAASlC,IAAI,IAAIU,EAAEyB,EAAAA,cAAI,OAAuZ,SAAW7B,GAAG4B,SAAS3B,EAAEwB,QAAQvB,IAAI,GAAM,MAAHD,GAASA,EAAE6B,QAAa,YAAJ5B,IAAW,IAAIC,EAAEH,EAAE+B,MAAMC,WAAWhC,EAAE+B,MAAMC,WAAW,OAAO9B,IAAIF,EAAEiC,aAAajC,EAAE+B,MAAMC,WAAW7B,CAAC,CAAjjB+B,CAAElC,EAAE,CAACyB,QAAQxB,EAAE2B,SAASlC,IAAIU,EAAE+B,WAAU,KAAKjC,IAAIE,EAAEgC,uBAAsB,KAAKhC,EAAEiC,IAA0B,SAAWrC,EAAEC,GAAG,IAAIG,EAAEG,EAAE,IAAIL,EAAE2B,EAAAA,cAAI,IAAI7B,EAAE,OAAOE,EAAEoC,QAAQ,IAAInC,GAAE,EAAGD,EAAEmC,KAAI,KAAKlC,GAAE,CAAE,IAAG,IAAIT,EAAwF,OAArFa,EAAuB,OAApBH,EAAEJ,EAAEV,oBAAqB,EAAOc,EAAEoB,KAAKxB,GAAGuC,QAAO9B,GAAGA,aAAa+B,iBAAsBjC,EAAE,GAAG,OAAkB,IAAXb,EAAE+C,QAAYxC,IAAIC,EAAEoC,UAAUI,QAAQC,WAAWjD,EAAEkD,KAAInC,GAAGA,EAAEoC,YAAWC,MAAK,KAAK3C,GAAGF,GAAG,IAAGC,EAAEoC,QAAQ,CAA3TS,CAAE/C,EAAEG,GAAG,GAAE,IAAGC,EAAEkC,OAAO,CAA/oBU,CAAE/C,EAAE,CAAC2B,SAASd,EAAEW,OAAAA,GAAUT,EAAEc,QAAQd,EAAEc,SAAQ,EAAGd,EAAEc,QAAQhB,EAAEgB,QAAQhB,EAAEgB,SAAQ,GAAId,EAAEc,UAAU5B,GAAGO,EAAE,GAAGE,EAAE,KAAKF,EAAE,GAAGE,EAAE,IAAK,EAACe,GAAAA,GAAMV,EAAEc,QAAQ5B,GAAGS,EAAE,GAAGF,EAAE,KAAKE,EAAE,GAAGF,EAAE,IAAIP,EAAES,EAAE,GAAGF,EAAE,EAAG,EAACkB,IAAAA,GAAO,IAAIsB,EAAEjC,EAAEc,SAAiC,mBAAjB7B,EAAEX,eAA2BW,EAAEX,gBAAgBmD,OAAO,IAAI3B,EAAEgB,SAAQ,EAAGnB,EAAE,GAAGT,GAAGE,GAAE,GAA8B,OAAzB6C,EAAK,MAAH9C,OAAQ,EAAOA,EAAE+C,MAAYD,EAAEzB,KAAKrB,EAAED,GAAG,UAArZA,GAAGO,EAAE,GAAmZ,GAAG,CAACT,EAAEE,EAAED,EAAEgB,IAAIjB,EAAE,CAACN,EAAE,CAACyD,OAAO5C,EAAE,GAAG6C,MAAM7C,EAAE,GAAG8C,MAAM9C,EAAE,GAAGyB,WAAWzB,EAAE,IAAIA,EAAE,KAAK,CAACL,EAAE,CAACiD,YAAO,EAAOC,WAAM,EAAOC,WAAM,EAAOrB,gBAAW,GAAQ"}