"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),r=require("react-dom"),t=require("../../hooks/use-iso-morphic-effect.js"),n=require("../../hooks/use-on-unmount.js"),u=require("../../hooks/use-owner.js"),o=require("../../hooks/use-server-handoff-complete.js"),l=require("../../hooks/use-sync-refs.js"),s=require("../../internal/portal-force-root.js"),a=require("../../utils/env.js"),i=require("../../utils/render.js");function f(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=f(e);let c=e.Fragment,p=i.forwardRefWithAs((function(f,d){let p=f,h=e.useRef(null),P=l.useSyncRefs(l.optionalRef((e=>{h.current=e})),d),R=u.useOwnerDocument(h),j=function(r){let t=s.usePortalRoot(),n=e.useContext(v),o=u.useOwnerDocument(r),[l,i]=e.useState((()=>{var e;if(!t&&null!==n)return null!=(e=n.current)?e:null;if(a.env.isServer)return null;let r=null==o?void 0:o.getElementById("headlessui-portal-root");if(r)return r;if(null===o)return null;let u=o.createElement("div");return u.setAttribute("id","headlessui-portal-root"),o.body.appendChild(u)}));return e.useEffect((()=>{null!==l&&(null!=o&&o.body.contains(l)||null==o||o.body.appendChild(l))}),[l,o]),e.useEffect((()=>{t||null!==n&&i(n.current)}),[n,i,t]),l}(h),[g]=e.useState((()=>{var e;return a.env.isServer?null:null!=(e=null==R?void 0:R.createElement("div"))?e:null})),q=e.useContext(m),y=o.useServerHandoffComplete();t.useIsoMorphicEffect((()=>{!j||!g||j.contains(g)||(g.setAttribute("data-headlessui-portal",""),j.appendChild(g))}),[j,g]),t.useIsoMorphicEffect((()=>{if(g&&q)return q.register(g)}),[q,g]),n.useOnUnmount((()=>{var e;!j||!g||(g instanceof Node&&j.contains(g)&&j.removeChild(g),j.childNodes.length<=0&&(null==(e=j.parentElement)||e.removeChild(j)))}));let C=i.useRender();return y&&j&&g?r.createPortal(C({ourProps:{ref:P},theirProps:p,slot:{},defaultTag:c,name:"Portal"}),g):null}));let h=e.Fragment,v=e.createContext(null);let m=e.createContext(null),P=i.forwardRefWithAs((function(e,r){let t=l.useSyncRefs(r),{enabled:n=!0,...u}=e,o=i.useRender();return n?d.default.createElement(p,{...u,ref:t}):o({ourProps:{ref:t},theirProps:u,slot:{},defaultTag:c,name:"Portal"})})),R=i.forwardRefWithAs((function(e,r){let{target:t,...n}=e,u={ref:l.useSyncRefs(r)},o=i.useRender();return d.default.createElement(v.Provider,{value:t},o({ourProps:u,theirProps:n,defaultTag:h,name:"Popover.Group"}))})),j=Object.assign(P,{Group:R});exports.Portal=j,exports.PortalGroup=R;
//# sourceMappingURL=portal.js.map
