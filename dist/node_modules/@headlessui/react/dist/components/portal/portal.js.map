{"version":3,"file":"portal.js","sources":["../../../../../../../node_modules/@headlessui/react/dist/components/portal/portal.js"],"sourcesContent":["\"use client\";import f,{Fragment as R,createContext as g,useContext as T,useEffect as E,useMemo as c,useRef as A,useState as G}from\"react\";import{createPortal as O}from\"react-dom\";import{useEvent as L}from'../../hooks/use-event.js';import{useIsoMorphicEffect as x}from'../../hooks/use-iso-morphic-effect.js';import{useOnUnmount as h}from'../../hooks/use-on-unmount.js';import{useOwnerDocument as _}from'../../hooks/use-owner.js';import{useServerHandoffComplete as F}from'../../hooks/use-server-handoff-complete.js';import{optionalRef as U,useSyncRefs as P}from'../../hooks/use-sync-refs.js';import{usePortalRoot as D}from'../../internal/portal-force-root.js';import{env as C}from'../../utils/env.js';import{forwardRefWithAs as m,useRender as d}from'../../utils/render.js';function N(u){let r=D(),n=T(v),e=_(u),[o,l]=G(()=>{var t;if(!r&&n!==null)return(t=n.current)!=null?t:null;if(C.isServer)return null;let p=e==null?void 0:e.getElementById(\"headlessui-portal-root\");if(p)return p;if(e===null)return null;let a=e.createElement(\"div\");return a.setAttribute(\"id\",\"headlessui-portal-root\"),e.body.appendChild(a)});return E(()=>{o!==null&&(e!=null&&e.body.contains(o)||e==null||e.body.appendChild(o))},[o,e]),E(()=>{r||n!==null&&l(n.current)},[n,l,r]),o}let M=R,S=m(function(r,n){let e=r,o=A(null),l=P(U(i=>{o.current=i}),n),p=_(o),a=N(o),[t]=G(()=>{var i;return C.isServer?null:(i=p==null?void 0:p.createElement(\"div\"))!=null?i:null}),s=T(y),b=F();x(()=>{!a||!t||a.contains(t)||(t.setAttribute(\"data-headlessui-portal\",\"\"),a.appendChild(t))},[a,t]),x(()=>{if(t&&s)return s.register(t)},[s,t]),h(()=>{var i;!a||!t||(t instanceof Node&&a.contains(t)&&a.removeChild(t),a.childNodes.length<=0&&((i=a.parentElement)==null||i.removeChild(a)))});let H=d();return b?!a||!t?null:O(H({ourProps:{ref:l},theirProps:e,slot:{},defaultTag:M,name:\"Portal\"}),t):null});function j(u,r){let n=P(r),{enabled:e=!0,...o}=u,l=d();return e?f.createElement(S,{...o,ref:n}):l({ourProps:{ref:n},theirProps:o,slot:{},defaultTag:M,name:\"Portal\"})}let W=R,v=g(null);function I(u,r){let{target:n,...e}=u,l={ref:P(r)},p=d();return f.createElement(v.Provider,{value:n},p({ourProps:l,theirProps:e,defaultTag:W,name:\"Popover.Group\"}))}let y=g(null);function te(){let u=T(y),r=A([]),n=L(l=>(r.current.push(l),u&&u.register(l),()=>e(l))),e=L(l=>{let p=r.current.indexOf(l);p!==-1&&r.current.splice(p,1),u&&u.unregister(l)}),o=c(()=>({register:n,unregister:e,portals:r}),[n,e,r]);return[r,c(()=>function({children:p}){return f.createElement(y.Provider,{value:o},p)},[o])]}let J=m(j),X=m(I),re=Object.assign(J,{Group:X});export{re as Portal,X as PortalGroup,te as useNestedPortals};\n"],"names":["M","R","Fragment","S","m","forwardRefWithAs","r","n","e","o","A","useRef","l","P","U","optionalRef","i","current","p","_","useOwnerDocument","a","u","D","T","useContext","v","G","t","C","env","isServer","getElementById","createElement","setAttribute","body","appendChild","E","useEffect","contains","N","s","y","b","F","useServerHandoffComplete","x","useIsoMorphicEffect","register","h","useOnUnmount","Node","removeChild","childNodes","length","parentElement","H","d","O","createPortal","ourProps","ref","theirProps","slot","defaultTag","name","W","g","J","useSyncRefs","enabled","useRender","f","X","target","Provider","value","re","Object","assign","Group"],"mappings":"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"}