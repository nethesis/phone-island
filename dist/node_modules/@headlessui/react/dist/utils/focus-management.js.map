{"version":3,"file":"focus-management.js","sources":["../../../../../../node_modules/@headlessui/react/dist/utils/focus-management.js"],"sourcesContent":["import{disposables as N}from'./disposables.js';import{match as L}from'./match.js';import{getOwnerDocument as E}from'./owner.js';let f=[\"[contentEditable=true]\",\"[tabindex]\",\"a[href]\",\"area[href]\",\"button:not([disabled])\",\"iframe\",\"input:not([disabled])\",\"select:not([disabled])\",\"textarea:not([disabled])\"].map(e=>`${e}:not([tabindex='-1'])`).join(\",\"),p=[\"[data-autofocus]\"].map(e=>`${e}:not([tabindex='-1'])`).join(\",\");var F=(n=>(n[n.First=1]=\"First\",n[n.Previous=2]=\"Previous\",n[n.Next=4]=\"Next\",n[n.Last=8]=\"Last\",n[n.WrapAround=16]=\"WrapAround\",n[n.NoScroll=32]=\"NoScroll\",n[n.AutoFocus=64]=\"AutoFocus\",n))(F||{}),T=(o=>(o[o.Error=0]=\"Error\",o[o.Overflow=1]=\"Overflow\",o[o.Success=2]=\"Success\",o[o.Underflow=3]=\"Underflow\",o))(T||{}),y=(t=>(t[t.Previous=-1]=\"Previous\",t[t.Next=1]=\"Next\",t))(y||{});function b(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(f)).sort((r,t)=>Math.sign((r.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}function S(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(p)).sort((r,t)=>Math.sign((r.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}var h=(t=>(t[t.Strict=0]=\"Strict\",t[t.Loose=1]=\"Loose\",t))(h||{});function A(e,r=0){var t;return e===((t=E(e))==null?void 0:t.body)?!1:L(r,{[0](){return e.matches(f)},[1](){let u=e;for(;u!==null;){if(u.matches(f))return!0;u=u.parentElement}return!1}})}function G(e){let r=E(e);N().nextFrame(()=>{r&&!A(r.activeElement,0)&&I(e)})}var H=(t=>(t[t.Keyboard=0]=\"Keyboard\",t[t.Mouse=1]=\"Mouse\",t))(H||{});typeof window!=\"undefined\"&&typeof document!=\"undefined\"&&(document.addEventListener(\"keydown\",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible=\"\")},!0),document.addEventListener(\"click\",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible=\"\")},!0));function I(e){e==null||e.focus({preventScroll:!0})}let w=[\"textarea\",\"input\"].join(\",\");function O(e){var r,t;return(t=(r=e==null?void 0:e.matches)==null?void 0:r.call(e,w))!=null?t:!1}function _(e,r=t=>t){return e.slice().sort((t,u)=>{let o=r(t),c=r(u);if(o===null||c===null)return 0;let l=o.compareDocumentPosition(c);return l&Node.DOCUMENT_POSITION_FOLLOWING?-1:l&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function j(e,r){return P(b(),r,{relativeTo:e})}function P(e,r,{sorted:t=!0,relativeTo:u=null,skipElements:o=[]}={}){let c=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,l=Array.isArray(e)?t?_(e):e:r&64?S(e):b(e);o.length>0&&l.length>1&&(l=l.filter(s=>!o.some(a=>a!=null&&\"current\"in a?(a==null?void 0:a.current)===s:a===s))),u=u!=null?u:c.activeElement;let n=(()=>{if(r&5)return 1;if(r&10)return-1;throw new Error(\"Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last\")})(),x=(()=>{if(r&1)return 0;if(r&2)return Math.max(0,l.indexOf(u))-1;if(r&4)return Math.max(0,l.indexOf(u))+1;if(r&8)return l.length-1;throw new Error(\"Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last\")})(),M=r&32?{preventScroll:!0}:{},m=0,d=l.length,i;do{if(m>=d||m+d<=0)return 0;let s=x+m;if(r&16)s=(s+d)%d;else{if(s<0)return 3;if(s>=d)return 1}i=l[s],i==null||i.focus(M),m+=n}while(i!==c.activeElement);return r&6&&O(i)&&i.select(),2}export{F as Focus,T as FocusResult,h as FocusableMode,I as focusElement,j as focusFrom,P as focusIn,f as focusableSelector,S as getAutoFocusableElements,b as getFocusableElements,A as isFocusableElement,G as restoreFocusIfNecessary,_ as sortByDomNode};\n"],"names":["f","map","e","join","p","t","o","n","F","First","Previous","Next","Last","WrapAround","NoScroll","AutoFocus","T","Error","Overflow","Success","Underflow","y","b","document","body","Array","from","querySelectorAll","sort","r","Math","sign","tabIndex","Number","MAX_SAFE_INTEGER","S","h","Strict","Loose","A","E","L","matches","u","parentElement","H","Keyboard","Mouse","I","focus","preventScroll","window","addEventListener","metaKey","altKey","ctrlKey","documentElement","dataset","headlessuiFocusVisible","detail","w","_","slice","c","l","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_PRECEDING","P","sorted","relativeTo","skipElements","isArray","length","ownerDocument","filter","s","some","a","current","activeElement","i","x","max","indexOf","M","m","d","call","O","select","N","disposables","nextFrame"],"mappings":"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"}