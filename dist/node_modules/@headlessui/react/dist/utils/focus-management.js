"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./disposables.js"),t=require("./match.js"),r=require("./owner.js");let o=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((e=>`${e}:not([tabindex='-1'])`)).join(","),n=["[data-autofocus]"].map((e=>`${e}:not([tabindex='-1'])`)).join(",");var u,s,l,i=((l=i||{})[l.First=1]="First",l[l.Previous=2]="Previous",l[l.Next=4]="Next",l[l.Last=8]="Last",l[l.WrapAround=16]="WrapAround",l[l.NoScroll=32]="NoScroll",l[l.AutoFocus=64]="AutoFocus",l),a=((s=a||{})[s.Error=0]="Error",s[s.Overflow=1]="Overflow",s[s.Success=2]="Success",s[s.Underflow=3]="Underflow",s),c=((u=c||{})[u.Previous=-1]="Previous",u[u.Next=1]="Next",u);function d(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(o)).sort(((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER))))}function m(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(n)).sort(((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER))))}var f=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(f||{});function E(e,n=0){var u;return e!==(null==(u=r.getOwnerDocument(e))?void 0:u.body)&&t.match(n,{0:()=>e.matches(o),1(){let t=e;for(;null!==t;){if(t.matches(o))return!0;t=t.parentElement}return!1}})}var b=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(b||{});function x(e){null==e||e.focus({preventScroll:!0})}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",(e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")}),!0),document.addEventListener("click",(e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")}),!0));let F=["textarea","input"].join(",");function p(e,t=(e=>e)){return e.slice().sort(((e,r)=>{let o=t(e),n=t(r);if(null===o||null===n)return 0;let u=o.compareDocumentPosition(n);return u&Node.DOCUMENT_POSITION_FOLLOWING?-1:u&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}function v(e,t,{sorted:r=!0,relativeTo:o=null,skipElements:n=[]}={}){let u=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,s=Array.isArray(e)?r?p(e):e:64&t?m(e):d(e);n.length>0&&s.length>1&&(s=s.filter((e=>!n.some((t=>null!=t&&"current"in t?(null==t?void 0:t.current)===e:t===e))))),o=null!=o?o:u.activeElement;let l,i=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),a=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,s.indexOf(o))-1;if(4&t)return Math.max(0,s.indexOf(o))+1;if(8&t)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=32&t?{preventScroll:!0}:{},f=0,E=s.length;do{if(f>=E||f+E<=0)return 0;let e=a+f;if(16&t)e=(e+E)%E;else{if(e<0)return 3;if(e>=E)return 1}l=s[e],null==l||l.focus(c),f+=i}while(l!==u.activeElement);return 6&t&&function(e){var t,r;return null!=(r=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,F))&&r}(l)&&l.select(),2}exports.Focus=i,exports.FocusResult=a,exports.FocusableMode=f,exports.focusElement=x,exports.focusFrom=function(e,t){return v(d(),t,{relativeTo:e})},exports.focusIn=v,exports.focusableSelector=o,exports.getAutoFocusableElements=m,exports.getFocusableElements=d,exports.isFocusableElement=E,exports.restoreFocusIfNecessary=function(t){let o=r.getOwnerDocument(t);e.disposables().nextFrame((()=>{o&&!E(o.activeElement,0)&&x(t)}))},exports.sortByDomNode=p;
//# sourceMappingURL=focus-management.js.map
