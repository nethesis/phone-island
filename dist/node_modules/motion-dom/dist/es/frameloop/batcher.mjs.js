"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./order.mjs.js"),s=require("./render-step.mjs.js"),r=require("../../../../motion-utils/dist/es/global-config.mjs.js");exports.createRenderBatcher=function(t,o){let n=!1,i=!0;const c={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,p=e.stepsOrder.reduce(((e,r)=>(e[r]=s.createRenderStep(a,o?r:void 0),e)),{}),{setup:d,read:l,resolveKeyframes:u,preUpdate:m,update:g,preRender:f,render:j,postRender:M}=p,h=()=>{const e=r.MotionGlobalConfig.useManualTiming?c.timestamp:performance.now();n=!1,r.MotionGlobalConfig.useManualTiming||(c.delta=i?1e3/60:Math.max(Math.min(e-c.timestamp,40),1)),c.timestamp=e,c.isProcessing=!0,d.process(c),l.process(c),u.process(c),m.process(c),g.process(c),f.process(c),j.process(c),M.process(c),c.isProcessing=!1,n&&o&&(i=!1,t(h))};return{schedule:e.stepsOrder.reduce(((e,s)=>{const r=p[s];return e[s]=(e,s=!1,o=!1)=>(n||(n=!0,i=!0,c.isProcessing||t(h)),r.schedule(e,s,o)),e}),{}),cancel:s=>{for(let r=0;r<e.stepsOrder.length;r++)p[e.stepsOrder[r]].cancel(s)},state:c,steps:p}};
//# sourceMappingURL=batcher.mjs.js.map
