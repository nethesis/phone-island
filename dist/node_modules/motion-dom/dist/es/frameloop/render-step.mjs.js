"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../stats/buffer.mjs.js");exports.createRenderStep=function(t,s){let r=new Set,a=new Set,c=!1,n=!1;const u=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function d(e){u.has(e)&&(f.schedule(e),t()),l++,e(o)}const f={schedule:(e,t=!1,s=!1)=>{const n=s&&c?r:a;return t&&u.add(e),n.has(e)||n.add(e),e},cancel:e=>{a.delete(e),u.delete(e)},process:t=>{o=t,c?n=!0:(c=!0,[r,a]=[a,r],r.forEach(d),s&&e.statsBuffer.value&&e.statsBuffer.value.frameloop[s].push(l),l=0,r.clear(),c=!1,n&&(n=!1,f.process(t)))}};return f};
//# sourceMappingURL=render-step.mjs.js.map
