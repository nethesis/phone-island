"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../drag/state/is-active.mjs.js"),s=require("../utils/is-node-or-child.mjs.js"),r=require("../utils/is-primary-pointer.mjs.js"),t=require("../utils/setup.mjs.js"),i=require("./utils/is-keyboard-accessible.mjs.js"),n=require("./utils/keyboard.mjs.js"),o=require("./utils/state.mjs.js");function a(s){return r.isPrimaryPointer(s)&&!e.isDragActive()}exports.press=function(e,r,u={}){const[d,c,l]=t.setupGesture(e,u),p=e=>{const t=e.currentTarget;if(!a(e)||o.isPressing.has(t))return;o.isPressing.add(t);const i=r(t,e),n=(e,s)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",l),a(e)&&o.isPressing.has(t)&&(o.isPressing.delete(t),"function"==typeof i&&i(e,{success:s}))},d=e=>{n(e,t===window||t===document||u.useGlobalTarget||s.isNodeOrChild(t,e.target))},l=e=>{n(e,!1)};window.addEventListener("pointerup",d,c),window.addEventListener("pointercancel",l,c)};return d.forEach((e=>{(u.useGlobalTarget?window:e).addEventListener("pointerdown",p,c),e instanceof HTMLElement&&(e.addEventListener("focus",(e=>n.enableKeyboardPress(e,c))),i.isElementKeyboardAccessible(e)||e.hasAttribute("tabindex")||(e.tabIndex=0))})),l};
//# sourceMappingURL=index.mjs.js.map
