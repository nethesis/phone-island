"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./commons.js");const t="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),r="function"==typeof ArrayBuffer,n=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,o=({type:o,data:f},c,i)=>t&&f instanceof Blob?c?i(f):a(f,i):r&&(f instanceof ArrayBuffer||n(f))?c?i(f):a(new Blob([f]),i):i(e.PACKET_TYPES[o]+(f||"")),a=(e,t)=>{const r=new FileReader;return r.onload=function(){const e=r.result.split(",")[1];t("b"+(e||""))},r.readAsDataURL(e)};function f(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let c;exports.encodePacket=o,exports.encodePacketToBinary=function(e,a){return t&&e.data instanceof Blob?e.data.arrayBuffer().then(f).then(a):r&&(e.data instanceof ArrayBuffer||n(e.data))?a(f(e.data)):void o(e,!1,(e=>{c||(c=new TextEncoder),a(c.encode(e))}))};
//# sourceMappingURL=encodePacket.browser.js.map
