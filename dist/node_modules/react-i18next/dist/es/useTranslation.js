"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../../@babel/runtime/helpers/slicedToArray.js"),t=require("../../../@babel/runtime/helpers/defineProperty.js"),r=require("../../../@babel/runtime/helpers/typeof.js"),n=require("react"),o=require("./context.js"),a=require("./utils.js"),u=require("./defaults.js"),i=require("./i18nInstance.js");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?s(Object(n),!0).forEach((function(r){t.default(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}exports.useTranslation=function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=s.i18n,l=n.useContext(o.I18nContext)||{},p=l.i18n,d=l.defaultNS,g=f||p||i.getI18n();if(g&&!g.reportNamespaces&&(g.reportNamespaces=new o.ReportNamespaces),!g){a.warnOnce("You will need to pass in an i18next instance by using initReactI18next");var y=function(e,t){return"string"==typeof t?t:t&&"object"===r.default(t)&&"string"==typeof t.defaultValue?t.defaultValue:Array.isArray(e)?e[e.length-1]:e},b=[y,{},!1];return b.t=y,b.i18n={},b.ready=!1,b}g.options.react&&void 0!==g.options.react.wait&&a.warnOnce("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var j=c(c(c({},u.getDefaults()),g.options.react),s),O=j.useSuspense,m=j.keyPrefix,v=t||d||g.options&&g.options.defaultNS;v="string"==typeof v?[v]:v||["translation"],g.reportNamespaces.addUsedNamespaces&&g.reportNamespaces.addUsedNamespaces(v);var h=(g.isInitialized||g.initializedStoreOnce)&&v.every((function(e){return a.hasLoadedNamespace(e,g,j)}));function w(){return g.getFixedT(s.lng||null,"fallback"===j.nsMode?v:v[0],m)}var N=n.useState(w),P=e.default(N,2),x=P[0],S=P[1],q=v.join();s.lng&&(q="".concat(s.lng).concat(q));var I,E,D,R=(I=q,D=n.useRef(),n.useEffect((function(){D.current=E?D.current:I}),[I,E]),D.current),k=n.useRef(!0);n.useEffect((function(){var e=j.bindI18n,t=j.bindI18nStore;function r(){k.current&&S(w)}return k.current=!0,h||O||(s.lng?a.loadLanguages(g,s.lng,v,(function(){k.current&&S(w)})):a.loadNamespaces(g,v,(function(){k.current&&S(w)}))),h&&R&&R!==q&&k.current&&S(w),e&&g&&g.on(e,r),t&&g&&g.store.on(t,r),function(){k.current=!1,e&&g&&e.split(" ").forEach((function(e){return g.off(e,r)})),t&&g&&t.split(" ").forEach((function(e){return g.store.off(e,r)}))}}),[g,q]);var A=n.useRef(!0);n.useEffect((function(){k.current&&!A.current&&S(w),A.current=!1}),[g,m]);var L=[x,g,h];if(L.t=x,L.i18n=g,L.ready=h,h)return L;if(!h&&!O)return L;throw new Promise((function(e){s.lng?a.loadLanguages(g,s.lng,v,(function(){return e()})):a.loadNamespaces(g,v,(function(){return e()}))}))};
//# sourceMappingURL=useTranslation.js.map
