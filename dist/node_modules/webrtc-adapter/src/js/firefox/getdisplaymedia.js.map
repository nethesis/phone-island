{"version":3,"file":"getdisplaymedia.js","sources":["../../../../../../node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js"],"sourcesContent":["/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        const err = new DOMException('getDisplayMedia without video ' +\n            'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = {mediaSource: preferredMediaSource};\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n}\n"],"names":["window","preferredMediaSource","navigator","mediaDevices","getDisplayMedia","constraints","video","err","DOMException","name","code","Promise","reject","mediaSource","getUserMedia"],"mappings":"gGAUO,SAA6BA,EAAQC,GACtCD,EAAOE,UAAUC,cACnB,oBAAqBH,EAAOE,UAAUC,cAGlCH,EAAOE,UAAUC,eAGvBH,EAAOE,UAAUC,aAAaC,gBAC5B,SAAyBC,GACvB,IAAMA,IAAeA,EAAYC,MAAQ,CACvC,MAAMC,EAAM,IAAIC,aAAa,0DAK7B,OAHAD,EAAIE,KAAO,gBAEXF,EAAIG,KAAO,EACJC,QAAQC,OAAOL,EACxB,CAMA,OAL0B,IAAtBF,EAAYC,MACdD,EAAYC,MAAQ,CAACO,YAAaZ,GAElCI,EAAYC,MAAMO,YAAcZ,EAE3BD,EAAOE,UAAUC,aAAaW,aAAaT,IAExD"}