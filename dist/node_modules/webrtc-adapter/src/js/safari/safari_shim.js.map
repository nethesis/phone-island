{"version":3,"file":"safari_shim.js","sources":["../../../../../../node_modules/webrtc-adapter/src/js/safari/safari_shim.js"],"sourcesContent":["/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nimport * as utils from '../utils';\n\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams =\n      function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack =\n      function addTrack(track, ...streams) {\n        if (streams) {\n          streams.forEach((stream) => {\n            if (!this._localStreams) {\n              this._localStreams = [stream];\n            } else if (!this._localStreams.includes(stream)) {\n              this._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        const index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        const tracks = stream.getTracks();\n        this.getSenders().forEach(sender => {\n          if (tracks.includes(sender.track)) {\n            this.removeTrack(sender);\n          }\n        });\n      };\n  }\n}\n\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams =\n      function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        const pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(stream => {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              const event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n  }\n}\n\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer =\n    function createOffer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  prototype.createAnswer =\n    function createAnswer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n        .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: utils.compactObject(constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nexport function shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection =\n    function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        const newIceServers = [];\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\n          let server = pcConfig.iceServers[i];\n          if (server.urls === undefined && server.url) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      'receiver' in window.RTCTrackEvent.prototype &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer =\n    function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio =\n            !!offerOptions.offerToReceiveAudio;\n        }\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'audio');\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          this.addTransceiver('audio', {direction: 'recvonly'});\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo =\n            !!offerOptions.offerToReceiveVideo;\n        }\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'video');\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          this.addTransceiver('video', {direction: 'recvonly'});\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n}\n\nexport function shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n\n"],"names":["shimConstraints","constraints","undefined","video","Object","assign","utils","window","AudioContext","webkitAudioContext","RTCPeerConnection","prototype","origCreateOffer","createOffer","origCreateAnswer","createAnswer","setLocalDescription","setRemoteDescription","addIceCandidate","successCallback","failureCallback","options","arguments","length","promise","apply","this","then","Promise","resolve","withCallback","description","candidate","offerOptions","offerToReceiveAudio","audioTransceiver","getTransceivers","find","transceiver","receiver","track","kind","direction","setDirection","addTransceiver","offerToReceiveVideo","videoTransceiver","navigator","mediaDevices","getUserMedia","_getUserMedia","bind","cb","errcb","getLocalStreams","_localStreams","_addTrack","addTrack","addStream","stream","includes","push","getAudioTracks","forEach","call","getVideoTracks","streams","removeStream","index","indexOf","splice","tracks","getTracks","getSenders","sender","removeTrack","OrigPeerConnection","pcConfig","pcConstraints","iceServers","newIceServers","i","server","urls","url","JSON","parse","stringify","defineProperty","get","generateCertificate","getRemoteStreams","_remoteStreams","_onaddstream","set","f","removeEventListener","_onaddstreampoly","addEventListener","e","event","Event","dispatchEvent","origSetRemoteDescription","pc","RTCTrackEvent"],"mappings":"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"}