"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("../../animation/utils/is-animation-controls.mjs.js"),n=require("../../context/MotionContext/index.mjs.js"),r=require("../../context/PresenceContext.mjs.js"),i=require("../../render/utils/is-controlling-variants.mjs.js"),s=require("../../render/utils/resolve-variants.mjs.js"),o=require("../../utils/use-constant.mjs.js"),a=require("../../value/utils/resolve-motion-value.mjs.js");function l(e,n,r,o){const l={},u=o(e,{});for(const e in u)l[e]=a.resolveMotionValue(u[e]);let{initial:c,animate:m}=e;const j=i.isControllingVariants(e),v=i.isVariantNode(e);n&&v&&!j&&!1!==e.inherit&&(void 0===c&&(c=n.initial),void 0===m&&(m=n.animate));let d=!!r&&!1===r.initial;d=d||!1===c;const f=d?m:c;if(f&&"boolean"!=typeof f&&!t.isAnimationControls(f)){const t=Array.isArray(f)?f:[f];for(let n=0;n<t.length;n++){const r=s.resolveVariantFromProps(e,t[n]);if(r){const{transitionEnd:e,transition:t,...n}=r;for(const e in n){let t=n[e];if(Array.isArray(t)){t=t[d?t.length-1:0]}null!==t&&(l[e]=t)}for(const t in e)l[t]=e[t]}}}return l}exports.makeUseVisualState=t=>(i,s)=>{const a=e.useContext(n.MotionContext),u=e.useContext(r.PresenceContext),c=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:l(n,r,i,e),renderState:t()}}(t,i,a,u);return s?c():o.useConstant(c)};
//# sourceMappingURL=use-visual-state.mjs.js.map
