"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../render/utils/resolve-dynamic-variants.mjs.js"),r=require("./visual-element-target.mjs.js");function t(i,o,a={}){const s=e.resolveVariant(i,o,"exit"===a.type?i.presenceContext?.custom:void 0);let{transition:l=i.getDefaultTransition()||{}}=s||{};a.transitionOverride&&(l=a.transitionOverride);const d=s?()=>Promise.all(r.animateTarget(i,s,a)):()=>Promise.resolve(),u=i.variantChildren&&i.variantChildren.size?(e=0)=>{const{delayChildren:r=0,staggerChildren:s,staggerDirection:d}=l;return function(e,r,i=0,o=0,a=1,s){const l=[],d=(e.variantChildren.size-1)*o,u=1===a?(e=0)=>e*o:(e=0)=>d-e*o;return Array.from(e.variantChildren).sort(n).forEach(((e,n)=>{e.notify("AnimationStart",r),l.push(t(e,r,{...s,delay:i+u(n)}).then((()=>e.notify("AnimationComplete",r))))})),Promise.all(l)}(i,o,r+e,s,d,a)}:()=>Promise.resolve(),{when:m}=l;if(m){const[e,r]="beforeChildren"===m?[d,u]:[u,d];return e().then((()=>r()))}return Promise.all([d(),u(a.delay)])}function n(e,r){return e.sortNodePosition(r)}exports.animateVariant=t,exports.sortByTreeOrder=n;
//# sourceMappingURL=visual-element-variant.mjs.js.map
