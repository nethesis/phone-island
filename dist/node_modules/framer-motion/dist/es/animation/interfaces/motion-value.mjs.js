"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../animators/waapi/utils/get-final-keyframe.mjs.js"),i=require("../utils/default-transitions.mjs.js"),t=require("../utils/is-transition-defined.mjs.js"),o=require("../../../../../motion-dom/dist/es/animation/utils/get-value-transition.mjs.js"),n=require("../../../../../motion-utils/dist/es/time-conversion.mjs.js"),s=require("../../../../../motion-utils/dist/es/global-config.mjs.js"),a=require("../../../../../motion-dom/dist/es/frameloop/frame.mjs.js"),r=require("../../../../../motion-dom/dist/es/animation/AsyncMotionValueAnimation.mjs.js");exports.animateMotionValue=(l,d,m,u={},y,p)=>f=>{const c=o.getValueTransition(u,l)||{},j=c.delay||u.delay||0;let{elapsed:g=0}=u;g-=n.secondsToMilliseconds(j);const v={keyframes:Array.isArray(m)?m:[null,m],ease:"easeOut",velocity:d.getVelocity(),...c,delay:-g,onUpdate:e=>{d.set(e),c.onUpdate&&c.onUpdate(e)},onComplete:()=>{f(),c.onComplete&&c.onComplete()},name:l,motionValue:d,element:p?void 0:y};t.isTransitionDefined(c)||Object.assign(v,i.getDefaultTransition(l,v)),v.duration&&(v.duration=n.secondsToMilliseconds(v.duration)),v.repeatDelay&&(v.repeatDelay=n.secondsToMilliseconds(v.repeatDelay)),void 0!==v.from&&(v.keyframes[0]=v.from);let M=!1;if((!1===v.type||0===v.duration&&!v.repeatDelay)&&(v.duration=0,0===v.delay&&(M=!0)),(s.MotionGlobalConfig.instantAnimations||s.MotionGlobalConfig.skipAnimations)&&(M=!0,v.duration=0,v.delay=0),v.allowFlatten=!c.type&&!c.ease,M&&!p&&void 0!==d.get()){const i=e.getFinalKeyframe(v.keyframes,c);if(void 0!==i)return void a.frame.update((()=>{v.onUpdate(i),v.onComplete()}))}return new r.AsyncMotionValueAnimation(v)};
//# sourceMappingURL=motion-value.mjs.js.map
