"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("../../../../../react/jsx-runtime.js");var e=require("react"),t=require("../../context/PresenceContext.mjs.js"),r=require("../../utils/use-constant.mjs.js"),s=require("./PopChild.mjs.js"),n=require("../../../../../../_virtual/jsx-runtime.js");function i(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var o=i(e);function u(){return new Map}exports.PresenceChild=({children:i,initial:c,isPresent:a,onExitComplete:l,custom:f,presenceAffectsLayout:j,mode:d,anchorX:p})=>{const m=r.useConstant(u),x=e.useId();let P=!0,h=e.useMemo((()=>(P=!1,{id:x,initial:c,isPresent:a,custom:f,onExitComplete:e=>{m.set(e,!0);for(const e of m.values())if(!e)return;l&&l()},register:e=>(m.set(e,!1),()=>m.delete(e))})),[a,m,l]);return j&&P&&(h={...h}),e.useMemo((()=>{m.forEach(((e,t)=>m.set(t,!1)))}),[a]),o.useEffect((()=>{!a&&!m.size&&l&&l()}),[a]),"popLayout"===d&&(i=n.jsxRuntime.exports.jsx(s.PopChild,{isPresent:a,anchorX:p,children:i})),n.jsxRuntime.exports.jsx(t.PresenceContext.Provider,{value:h,children:i})};
//# sourceMappingURL=PresenceChild.mjs.js.map
