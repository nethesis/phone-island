{"version":3,"file":"useIntersectionObserver.js","sources":["../../../src/utils/customHooks/useIntersectionObserver.ts"],"sourcesContent":["// Copyright (C) 2024 Nethesis S.r.l.\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\nimport { RefObject, useEffect, useState } from 'react'\n\ninterface Args extends IntersectionObserverInit {\n  freezeOnceVisible?: boolean\n}\n\nfunction useIntersectionObserver(\n  elementRef: RefObject<Element>,\n  { threshold = 0, root = null, rootMargin = '0%', freezeOnceVisible = false }: Args,\n): IntersectionObserverEntry | undefined {\n  const [entry, setEntry] = useState<IntersectionObserverEntry>()\n\n  const frozen = entry?.isIntersecting && freezeOnceVisible\n\n  const updateEntry = ([entry]: IntersectionObserverEntry[]): void => {\n    setEntry(entry)\n  }\n\n  useEffect(() => {\n    const node = elementRef?.current // DOM Ref\n    const hasIOSupport = !!window.IntersectionObserver\n\n    if (!hasIOSupport || frozen || !node) return\n\n    const observerParams = { threshold, root, rootMargin }\n    const observer = new IntersectionObserver(updateEntry, observerParams)\n\n    observer.observe(node)\n\n    return () => observer.disconnect()\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [elementRef?.current, JSON.stringify(threshold), root, rootMargin, frozen])\n\n  return entry\n}\n\nexport default useIntersectionObserver\n"],"names":["elementRef","_a","_b","threshold","_c","root","_d","rootMargin","_e","freezeOnceVisible","_f","useState","entry","setEntry","frozen","isIntersecting","updateEntry","useEffect","node","current","window","IntersectionObserver","observer","observe","disconnect","JSON","stringify"],"mappings":"2GASA,SACEA,EACAC,OAAEC,EAAaD,EAAAE,UAAbA,OAAS,IAAAD,EAAG,EAACA,EAAEE,EAAWH,EAAAI,KAAXA,OAAI,IAAAD,EAAG,KAAIA,EAAEE,EAAiBL,EAAAM,WAAjBA,OAAU,IAAAD,EAAG,KAAIA,EAAEE,EAAAP,EAAAQ,kBAAAA,OAAoB,IAAAD,GAAKA,EAEpEE,EAAoBC,aAAnBC,EAAKF,EAAA,GAAEG,EAAQH,EAAA,GAEhBI,GAASF,aAAA,EAAAA,EAAOG,iBAAkBN,EAElCO,EAAc,SAACf,GAAC,IAAAW,EAAKX,EAAA,GACzBY,EAASD,EACX,EAkBA,OAhBAK,EAAAA,WAAU,WACR,IAAMC,EAAOlB,aAAA,EAAAA,EAAYmB,QAGzB,KAFuBC,OAAOC,uBAETP,GAAWI,EAAhC,CAEA,IACMI,EAAW,IAAID,qBAAqBL,EADnB,CAAEb,UAASA,EAAEE,KAAIA,EAAEE,WAAUA,IAKpD,OAFAe,EAASC,QAAQL,GAEV,WAAM,OAAAI,EAASE,YAAY,CAPU,IAU3C,CAACxB,eAAAA,EAAYmB,QAASM,KAAKC,UAAUvB,GAAYE,EAAME,EAAYO,IAE/DF,CACT"}