{"version":3,"file":"useEventListener.js","sources":["../../../src/utils/customHooks/useEventListener.ts"],"sourcesContent":["// Copyright (C) 2024 Nethesis S.r.l.\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\nimport { useEffect, useRef } from 'react'\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect'\n\n// Event listener hook\nexport const useEventListener = (\n  eventName: string,\n  handler: (data: any) => void,\n  element = window,\n) => {\n  // Create a ref that stores handler\n  const savedHandler = useRef<typeof handler>()\n  // Update ref.current value if handler changes.\n  // This allows our effect below to always get latest handler ...\n  // ... without us needing to pass it in effect deps array ...\n  // ... and potentially cause effect to re-run every render.\n  useIsomorphicLayoutEffect(() => {\n    savedHandler.current = handler\n  }, [handler])\n  useEffect(\n    () => {\n      // Make sure element supports addEventListener\n      // On\n      const isSupported = element && element.addEventListener\n      if (!isSupported) return\n      // Create event listener that calls handler function stored in ref\n      // @ts-ignore\n      const eventListener = (event) => savedHandler.current(event.detail)\n      // Add event listener\n      element.addEventListener(eventName, eventListener)\n      // Remove event listener on cleanup\n      return () => {\n        element.removeEventListener(eventName, eventListener)\n      }\n    },\n    [eventName, element], // Re-run if eventName or element changes\n  )\n}\n"],"names":["eventName","handler","element","window","savedHandler","useRef","useIsomorphicLayoutEffect","current","useEffect","addEventListener","eventListener","event","detail","removeEventListener"],"mappings":"gKAOgC,SAC9BA,EACAC,EACAC,QAAA,IAAAA,IAAAA,EAAgBC,QAGhB,IAAMC,EAAeC,EAAAA,SAKrBC,EAAAA,2BAA0B,WACxBF,EAAaG,QAAUN,CACzB,GAAG,CAACA,IACJO,EAAAA,WACE,WAIE,GADoBN,GAAWA,EAAQO,iBACvC,CAGA,IAAMC,EAAgB,SAACC,GAAU,OAAAP,EAAaG,QAAQI,EAAMC,SAI5D,OAFAV,EAAQO,iBAAiBT,EAAWU,GAE7B,WACLR,EAAQW,oBAAoBb,EAAWU,EACzC,CATwB,CAU1B,GACA,CAACV,EAAWE,GAEhB"}